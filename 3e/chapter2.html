<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><link href="style.css" rel="stylesheet" type="text/css" /><title>Pythonで退屈な作業を自動化する
</title></head><body><div type="frontmatter" class="calibre" id="calibre_link-0">





<div type="bodymatter" class="calibre" id="calibre_link-43">
<section type="chapter" role="doc-chapter" aria-labelledby="ch2">
<span role="doc-pagebreak" type="pagebreak" id="calibre_link-1432" aria-label="27"></span>
<hgroup>
<h2 class="title" id="calibre_link-1433">
<span class="tpt"><span class="sans_dogma_ot_bold_b_">2</span></span> <span class="ct"><span class="sans_dogma_ot_bold_b_">if-elseとフロー制御</span></span>
</h2>
</hgroup>
<figure class="opener"><img class="opener1" src="images/000112.jpg" role="presentation" alt="" />
</figure>
<p class="introtni">前章までに、個々の命令の基礎と、プログラムは一連の命令であることを学びました。しかし、週末の用事リストのように、一連の命令を単純に次々と実行することにプログラミングの真価があるのではありません。プログラムは、式の評価値に応じて、命令を飛ばしたり繰り返したり、複数の命令の中から実行する命令を選んだりできます。実際に、プログラムを最初の行から最後の行まで一行ずつ実行することなんてほとんどありません。<i class="calibre18">フロー制御文</i>によって、どの条件下でどの命令を実行するかを判定します。</p>
<p class="tx">フロー制御文はフローチャートに対応します。本章では、取り上げるコードに対応するフローチャートを示しています。図2-1は雨が降っているときにどうするかのフローチャートです。StartからEndまで矢印をたどります。</p>
<figure class="img"><img class="img1" id="calibre_link-661" src="images/000048.jpg" alt="" />
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">図 2-1：雨が降っているときにどうするかのフローチャート</span></p></figcaption>
</figure>
<p class="tx">フローチャートでは、始まりから終わりまでに複数の道筋があるのが普通です。コンピュータプログラムのコードも同じです。フローチャートでは、分岐点をひし形で表し、その他のステップを長方形で表し、始点と終点は角丸の長方形で表します。</p>
<p class="tx">フロー制御文を学ぶ前に、<i class="calibre5">yes</i>と<i class="calibre5">no</i>をどのように表すか、Pythonのコードで分岐点をどう書くかを知っておく必要があります。ブール値（真偽値）、比較演算子、ブール演算子から始めましょう。</p>
<section type="division" aria-labelledby="sec1">
<h3 class="h" id="calibre_link-1434"><span id="calibre_link-44"></span><span class="sans_futura_std_bold_b_">ブール値</span></h3>
<p class="tni">整数型、浮動小数点数型、文字列型の値には無限の可能性がありますが、<i class="calibre5">ブール型</i>には2つの値しかありません。<span class="thesansmonocd_w5regular_">True</span>と<span class="thesansmonocd_w5regular_">False</span>の2つです。ブール型という名称は数学者のジョージ・ブールから付けられました。Pythonのコードに書く際は、 <span class="thesansmonocd_w5regular_">True</span>と<span class="thesansmonocd_w5regular_">False</span>をクォートで囲まず、必ず<i class="calibre5">T</i>または<i class="calibre5">F</i>の大文字で始めて、残りの部分は小文字で書きます。これらのブール値には引用符（クォート）がないことに注意してください。文字列値の<span class="thesansmonocd_w5regular_">'True'</span>や<span class="thesansmonocd_w5regular_">'False'</span>とは異なります。以下の式を対話型シェルに入力してみてください。</p>
<pre class="pre"><code class="calibre9"><span class="codeannotated_codeannotation" aria-label="annotation1">❶</span> &gt;&gt;&gt; <b class="calibre10">spam = True</b>
&gt;&gt;&gt; <b class="calibre10">spam</b>
True
<span class="codeannotated_codeannotation" aria-label="annotation2">❷</span> &gt;&gt;&gt; <b class="calibre10">true</b>
Traceback (most recent call last):
  File "&lt;python-input-0&gt;", line 1, in &lt;module&gt;
NameError: name 'true' is not defined
<span class="codeannotated_codeannotation" aria-label="annotation3">❸</span> &gt;&gt;&gt; <b class="calibre10">False = 2 + 2</b>
  File "&lt;python-input-0&gt;", line 1, in &lt;module&gt;
SyntaxError: can't assign to False
</code></pre>
<p class="tx">意図的にエラーを発生させている部分があります。ほかの値と同様に、ブール値を式の中で使えますし、変数に格納することもできます（<span class="codeannotation" aria-label="annotation1">➊</span>）。大文字と小文字を適切に書かなかったり（<span class="codeannotation" aria-label="annotation2">➋</span>）、<span class="thesansmonocd_w5regular_">True</span>や<span class="thesansmonocd_w5regular_">False</span>を変数名に使ったりすると（<span class="codeannotation" aria-label="annotation3">➌</span>）、エラーが発生します。</p>
</section>
<section type="division" aria-labelledby="sec2">
<h3 class="h" id="calibre_link-1435"><span id="calibre_link-45"></span><span class="sans_futura_std_bold_b_">比較演算子</span></h3>
<p class="tni"><i class="calibre5">比較演算子</i>は、<i class="calibre5">関係演算子</i>と呼ばれることもありますが、2つの値を比較してブール値に評価します。表2-1で比較演算子をまとめました。</p>
<table class="basic-table">
<caption class="calibre12"><p class="tt" id="calibre_link-663"><span class="sans_futura_std_bold_b_"><span class="sans_futura_std_bold_b_">表2-1：</span></span> <span class="sans_futura_std_book_">比較演算子</span></p></caption>

<thead class="calibre13">
<tr class="calibre14">
<th class="tch" scope="col"><p class="tch1"><span class="sans_futura_std_bold_b_">演算子</span></p></th>
<th class="tch" scope="col"><p class="tch1"><span class="sans_futura_std_bold_b_">意味</span></p></th>
<th class="tch" scope="col"><p class="tch1"><span class="sans_futura_std_bold_b_">例</span></p></th>
</tr>
</thead>
<tbody class="calibre15">
<tr class="calibre16">
<td class="tbf"><p class="tch1"><span class="thesansmonocd_w5regular_">==</span></p></td>
<td class="tbf"><p class="tch1"><span class="sans_futura_std_book_">等しい</span></p></td>
<td class="tbf"><p class="tch1"><span class="thesansmonocd_w5regular_">5</span> <span class="thesansmonocd_w5regular_">==</span> <span class="thesansmonocd_w5regular_">5</span> <span class="sans_futura_std_book_">は</span> <span class="thesansmonocd_w5regular_">True</span><span class="sans_futura_std_book_">です。</span> <span class="thesansmonocd_w5regular_">4</span> <span class="thesansmonocd_w5regular_">==</span> <span class="thesansmonocd_w5regular_">2</span> <span class="thesansmonocd_w5regular_">+</span> <span class="thesansmonocd_w5regular_">2</span> <span class="sans_futura_std_book_">も</span> <span class="thesansmonocd_w5regular_">True</span><span class="sans_futura_std_book_">です。</span></p></td>
</tr>
<tr class="calibre14">
<td class="tb"><p class="tch1"><span class="thesansmonocd_w5regular_">!=</span></p></td>
<td class="tb"><p class="tch1"><span class="sans_futura_std_book_">等しくない</span></p></td>
<td class="tb"><p class="tch1"><span class="thesansmonocd_w5regular_">1 !=</span> <span class="thesansmonocd_w5regular_">2</span> <span class="sans_futura_std_book_">は</span> <span class="thesansmonocd_w5regular_">True</span><span class="sans_futura_std_book_">です。</span> <span class="thesansmonocd_w5regular_">'Hello' !=</span> <span class="thesansmonocd_w5regular_">'Hello'</span> <span class="sans_futura_std_book_">は</span> <span class="thesansmonocd_w5regular_">False</span><span class="sans_futura_std_book_">です。</span></p></td>
</tr>
<tr class="calibre16">
<td class="tb"><p class="tch1"><span class="thesansmonocd_w5regular_">&lt;</span></p></td>
<td class="tb"><p class="tch1"><span class="sans_futura_std_book_">より小さい</span></p></td>
<td class="tb"><p class="tch1"><span class="thesansmonocd_w5regular_">10 &lt; 5</span> <span class="sans_futura_std_book_">は</span> <span class="thesansmonocd_w5regular_">False</span><span class="sans_futura_std_book_">です。</span> <span class="thesansmonocd_w5regular_">1.999 &lt; 5</span> <span class="sans_futura_std_book_">は</span> <span class="thesansmonocd_w5regular_">True</span><span class="sans_futura_std_book_">です。</span></p></td>
</tr>
<tr class="calibre14">
<td class="tb"><p class="tch1"><span class="thesansmonocd_w5regular_">&gt;</span></p></td>
<td class="tb"><p class="tch1"><span class="sans_futura_std_book_">より大きい</span></p></td>
<td class="tb"><p class="tch1"><span class="thesansmonocd_w5regular_">1</span> <span class="thesansmonocd_w5regular_">+</span> <span class="thesansmonocd_w5regular_">1 &gt; 4</span> <span class="thesansmonocd_w5regular_">+</span> <span class="thesansmonocd_w5regular_">8</span> <span class="sans_futura_std_book_">は</span> <span class="thesansmonocd_w5regular_">False</span><span class="sans_futura_std_book_">です。</span> <span class="thesansmonocd_w5regular_">99 &gt; 4</span> <span class="thesansmonocd_w5regular_">+</span> <span class="thesansmonocd_w5regular_">8</span> <span class="sans_futura_std_book_">は</span> <span class="thesansmonocd_w5regular_">True</span><span class="sans_futura_std_book_">です。</span></p></td>
</tr>
<tr class="calibre16">
<td class="tb"><p class="tch1"><span class="thesansmonocd_w5regular_">&lt;=</span></p></td>
<td class="tb"><p class="tch1"><span class="sans_futura_std_book_">以下</span></p></td>
<td class="tb"><p class="tch1"><span class="thesansmonocd_w5regular_">4 &lt;=</span> <span class="thesansmonocd_w5regular_">5</span> <span class="sans_futura_std_book_">は</span> <span class="thesansmonocd_w5regular_">True</span><span class="sans_futura_std_book_">です。</span> <span class="thesansmonocd_w5regular_">5 &lt;=</span> <span class="thesansmonocd_w5regular_">5</span> <span class="sans_futura_std_book_">も</span> <span class="thesansmonocd_w5regular_">True</span><span class="sans_futura_std_book_">です。</span></p></td>
</tr>
<tr class="calibre14">
<td class="tbl"><p class="tch1"><span class="thesansmonocd_w5regular_">&gt;=</span></p></td>
<td class="tbl"><p class="tch1"><span class="sans_futura_std_book_">以上</span></p></td>
<td class="tbl"><p class="tch1"><span class="thesansmonocd_w5regular_">5 &gt;=</span> <span class="thesansmonocd_w5regular_">4</span> <span class="sans_futura_std_book_">は</span> <span class="thesansmonocd_w5regular_">True</span><span class="sans_futura_std_book_">です。ｌ</span> <span class="thesansmonocd_w5regular_">5 &gt;=</span> <span class="thesansmonocd_w5regular_">5</span> <span class="sans_futura_std_book_">も</span> <span class="thesansmonocd_w5regular_">True</span><span class="sans_futura_std_book_">です。</span></p></td>
</tr>
</tbody>
</table>
<p class="tx">これらの演算子は値に応じて<span class="thesansmonocd_w5regular_">True</span>または<span class="thesansmonocd_w5regular_">False</span>に評価します。<span class="thesansmonocd_w5regular_">==</span>と<span class="thesansmonocd_w5regular_">!=</span>から試してみましょう。</p>
<pre class="pre"><code class="calibre9">&gt;&gt;&gt; <b class="calibre10">42 == 42</b>
True
&gt;&gt;&gt; <b class="calibre10">42 == 99</b>
False
<span role="doc-pagebreak" type="pagebreak" id="calibre_link-1222" aria-label="30"></span>&gt;&gt;&gt; <b class="calibre10">2 != 3</b>
True
&gt;&gt;&gt; <b class="calibre10">2 != 2</b>
False
</code></pre>
<p class="tx">両側の値が等しければ<span class="thesansmonocd_w5regular_">==</span>は<span class="thesansmonocd_w5regular_">True</span>に評価し、両側の値が等しくなければ<span class="thesansmonocd_w5regular_">!=</span>は<span class="thesansmonocd_w5regular_">True</span>に評価します。<span class="thesansmonocd_w5regular_">==</span>と<span class="thesansmonocd_w5regular_">!=</span>はどのデータ型に対しても使えます。</p>
<pre class="pre"><code class="calibre9">&gt;&gt;&gt; <b class="calibre10">'hello' == 'hello'</b>
True
&gt;&gt;&gt; <b class="calibre10">'hello' == 'Hello'</b>
False
&gt;&gt;&gt; <b class="calibre10">'dog' != 'cat'</b>
True
&gt;&gt;&gt; <b class="calibre10">True == True</b>
True
&gt;&gt;&gt; <b class="calibre10">True != False</b>
True
&gt;&gt;&gt; <b class="calibre10">42 == 42.0</b>
True
<span class="codeannotated_codeannotation" aria-label="annotation1">❶</span> &gt;&gt;&gt; <b class="calibre10">42 == '42'</b>
False
</code></pre>
<p class="tx">整数値と浮動小数点数値が文字列と等しくなることはありません。<span class="thesansmonocd_w5regular_">42</span> <span class="thesansmonocd_w5regular_">==</span> <span class="thesansmonocd_w5regular_">'42'</span>（<span class="thesansmonocd_w5regular_">➊</span>）は<span class="thesansmonocd_w5regular_">False</span>です。Pythonでは整数の<span class="thesansmonocd_w5regular_">42</span>は文字列の<span class="thesansmonocd_w5regular_">'42'</span>とは異なるからです。他方で、整数の<span class="thesansmonocd_w5regular_">42</span>と浮動小数点数の<span class="thesansmonocd_w5regular_">42.0</span>は同じだとみなされます。</p>
<p class="tx"><span class="thesansmonocd_w5regular_">&lt;</span>、<span class="thesansmonocd_w5regular_">&gt;</span>、<span class="thesansmonocd_w5regular_">&lt;=</span>、<span class="thesansmonocd_w5regular_">&gt;=</span>は、整数値と浮動小数点数値に対してだけ使います。</p>
<pre class="pre"><code class="calibre9">&gt;&gt;&gt; <b class="calibre10">42 &lt; 100</b>
True
&gt;&gt;&gt; <b class="calibre10">42 &gt; 100</b>
False
&gt;&gt;&gt; <b class="calibre10">42 &lt; 42</b>
False
&gt;&gt;&gt; <b class="calibre10">eggs = 42</b>
<span class="codeannotated_codeannotation" aria-label="annotation1">❶</span> &gt;&gt;&gt; <b class="calibre10">eggs &lt;= 42</b>
True
&gt;&gt;&gt; <b class="calibre10">my_age = 29</b>
<span class="codeannotated_codeannotation" aria-label="annotation2">❷</span> &gt;&gt;&gt; <b class="calibre10">my_age &gt;= 10</b>
True
</code></pre>
<p class="tx"> <span class="thesansmonocd_w5regular_">eggs &lt;=</span> <span class="thesansmonocd_w5regular_">42</span>(<span class="codeannotation" aria-label="annotation1">❶</span>)や<span class="thesansmonocd_w5regular_">my_age &gt;=</span> <span class="thesansmonocd_w5regular_">10</span>(<span class="codeannotation" aria-label="annotation2">❷</span>)のように、変数の値に対して比較演算子を用いるのが一般的です。（<span class="thesansmonocd_w5regular_">'dog' !=</span> <span class="thesansmonocd_w5regular_">'cat'</span>のようにリテラル値を比較しても結果はわかりきっています。）フロー制御文の箇所でさらに例を見ます。</p>
<aside class="box" aria-label="box-5">
<p class="bt" id="calibre_link-1436"><span role="doc-pagebreak" type="pagebreak" id="calibre_link-905" aria-label="31"></span><span class="sans_futura_std_bold_b_">==演算子と=演算子の違い</span></p>
<p class="btni"><span class="sans_futura_std_book_">「等しい」を表す</span><span class="thesansmonocd_w5regular_">==</span><span class="sans_futura_std_book_">はイコール記号2つで、「代入」を表す</span><span class="thesansmonocd_w5regular_">=</span><span class="sans_futura_std_book_">はイコール記号1つです。これらを混同しやすいので、以下の点をはっきりさせておきます。</span></p>
<ul class="ul">
<li class="boxlistbullet"><span class="thesansmonocd_w5regular_">==</span><span class="sans_futura_std_book_">は2つの値が等しいかどうかを判定します。</span></li>
<li class="boxlistbullet"><span class="thesansmonocd_w5regular_">=</span><span class="sans_futura_std_book_">は右側の値を左側の変数に代入します。</span></li>
</ul>
<p class="boxb-last"><span class="sans_futura_std_book_">「等しい」を表す</span><span class="thesansmonocd_w5regular_">==</span><span class="sans_futura_std_book_">は、「等しくない」を表す</span><span class="thesansmonocd_w5regular_">!=</span><span class="sans_futura_std_book_">と同じように、2文字です。</span></p>
</aside>
</section>
<section type="division" aria-labelledby="sec3">
<h3 class="h" id="calibre_link-1437"><span id="calibre_link-46"></span><span class="sans_futura_std_bold_b_">ブール演算子</span></h3>
<p class="tni"><span class="thesansmonocd_w5regular_">and</span>、<span class="thesansmonocd_w5regular_">or</span>、<span class="thesansmonocd_w5regular_">not</span>という3つのブール演算子を使ってブール値を比較できます。比較演算子と同様に、ブール値に評価します。<span class="thesansmonocd_w5regular_">and</span>演算子から詳しく見ていきましょう。</p>
<p class="tx"><span class="thesansmonocd_w5regular_">and</span>演算子は2つのブール値（または式）を取るので、<i class="calibre5">二項</i>ブール演算子です。<span class="thesansmonocd_w5regular_">and</span>演算子は、2つのブール値が<i class="calibre5">両方とも</i><span class="thesansmonocd_w5regular_">True</span>の場合にだけ<span class="thesansmonocd_w5regular_">True</span>に評価します。それ以外の場合は<span class="thesansmonocd_w5regular_">False</span>に評価します。対話型シェルで<span class="thesansmonocd_w5regular_">and</span>演算子の動作を試してみましょう。</p>
<pre class="pre"><code class="calibre9">&gt;&gt;&gt; <b class="calibre10">True and True</b>
True
&gt;&gt;&gt; <b class="calibre10">True and False</b>
False
</code></pre>
<p class="tx"><i class="calibre5">真理値表</i>を見ればブール演算のすべての可能性がわかります。表2-2は<span class="thesansmonocd_w5regular_">and</span>演算子の真理値表です。</p>
<table class="basic-table">
<caption class="calibre12"><p class="tt" id="calibre_link-664"><span class="sans_futura_std_bold_b_"><span class="sans_futura_std_bold_b_">表 2-2：</span></span><span class="sans_futura_std_book_"></span> <span class="thesansmonocd_w5regular_">and</span><span class="sans_futura_std_book_">演算子の真理値表</span></p></caption>

<thead class="calibre13">
<tr class="calibre14">
<th class="tch" scope="col"><p class="tch1"><span class="sans_futura_std_bold_b_">式</span></p></th>
<th class="tch" scope="col"><p class="tch1"><span class="sans_futura_std_bold_b_">値（計算結果）</span></p></th>
</tr>
</thead>
<tbody class="calibre15">
<tr class="calibre16">
<td class="tbf"><p class="tch1"><span class="thesansmonocd_w5regular_">True and True</span></p></td>
<td class="tbf"><p class="tch1"><span class="thesansmonocd_w5regular_">True</span></p></td>
</tr>
<tr class="calibre14">
<td class="tb"><p class="tch1"><span class="thesansmonocd_w5regular_">True and False</span></p></td>
<td class="tb"><p class="tch1"><span class="thesansmonocd_w5regular_">False</span></p></td>
</tr>
<tr class="calibre16">
<td class="tb"><p class="tch1"><span class="thesansmonocd_w5regular_">False and True</span></p></td>
<td class="tb"><p class="tch1"><span class="thesansmonocd_w5regular_">False</span></p></td>
</tr>
<tr class="calibre14">
<td class="tbl"><p class="tch1"><span class="thesansmonocd_w5regular_">False and False</span></p></td>
<td class="tbl"><p class="tch1"><span class="thesansmonocd_w5regular_">False</span></p></td>
</tr>
</tbody>
</table>
<p class="tx"><span class="thesansmonocd_w5regular_">and</span>演算子と同様に、<span class="thesansmonocd_w5regular_">or</span>演算子は2つのブール値（または式）を取るので、二項ブール演算子です。<span class="thesansmonocd_w5regular_">or</span>演算子は、2つのブール値の<i class="calibre5">どちらか</i>が<span class="thesansmonocd_w5regular_">True</span>の場合に<span class="thesansmonocd_w5regular_">True</span>に評価します。両方とも<span class="thesansmonocd_w5regular_">False</span>であれば、<span class="thesansmonocd_w5regular_">False</span>に評価します。</p>
<pre class="pre"><code class="calibre9">&gt;&gt;&gt; <b class="calibre10">False or True</b>
True
&gt;&gt;&gt; <b class="calibre10">False or False</b>
False
</code></pre>
<p class="tx"> 表2-3の真理値表に<span class="thesansmonocd_w5regular_">or</span>演算子のすべての可能性を示しています。</p>
<table class="basic-table">
<caption class="calibre12"><p class="tt" id="calibre_link-665"><span class="sans_futura_std_bold_b_"><span class="sans_futura_std_bold_b_">表 2-3：</span></span><span class="thesansmonocd_w5regular_">or</span> <span class="sans_futura_std_book_">演算子の真理値表</span></p></caption>

<thead class="calibre13">
<tr class="calibre14">
<th class="tch" scope="col"><p class="tch1"><span class="sans_futura_std_bold_b_">式</span></p></th>
<th class="tch" scope="col"><p class="tch1"><span class="sans_futura_std_bold_b_">値（計算結果）</span></p></th>
</tr>
</thead>
<tbody class="calibre15">
<tr class="calibre16">
<td class="tbf"><p class="tch1"><span class="thesansmonocd_w5regular_">True or True</span></p></td>
<td class="tbf"><p class="tch1"><span class="thesansmonocd_w5regular_">True</span></p></td>
</tr>
<tr class="calibre14">
<td class="tb"><p class="tch1"><span class="thesansmonocd_w5regular_">True or False</span></p></td>
<td class="tb"><p class="tch1"><span class="thesansmonocd_w5regular_">True</span></p></td>
</tr>
<tr class="calibre16">
<td class="tb"><p class="tch1"><span class="thesansmonocd_w5regular_">False or True</span></p></td>
<td class="tb"><p class="tch1"><span class="thesansmonocd_w5regular_">True</span></p></td>
</tr>
<tr class="calibre14">
<td class="tbl"><p class="tch1"><span class="thesansmonocd_w5regular_">False or False</span></p></td>
<td class="tbl"><p class="tch1"><span class="thesansmonocd_w5regular_">False</span></p></td>
</tr>
</tbody>
</table>
<p class="tx"><span class="thesansmonocd_w5regular_">and</span>や<span class="thesansmonocd_w5regular_">or</span>とは異なり、<span class="thesansmonocd_w5regular_">not</span>演算子は1つのブール値（または式）を取ります。<i class="calibre5">単項</i>演算子です。<span class="thesansmonocd_w5regular_">not</span>演算子はブール値を反転させます。</p>
<pre class="pre"><code class="calibre9">&gt;&gt;&gt; <b class="calibre10">not True</b>
False
<span class="codeannotated_codeannotation" aria-label="annotation1">❶</span> &gt;&gt;&gt; <b class="calibre10">not not not not True</b>
True
</code></pre>
<p class="tx">会話や文章で二重否定を使うのと同じように、<span class="thesansmonocd_w5regular_">not</span>演算子を重ねることができます（<span class="codeannotation" aria-label="annotation1">➊</span>）。もっとも、実際のプログラムでそのような記述をするのが正当ではない理由が決してないわけではありません（否定を重ねるとこの文のように読みにくくなります）。表2-4で<span class="thesansmonocd_w5regular_">not</span>の真理値表をしめしています。</p>
<table class="basic-table">
<caption class="calibre12"><p class="tt" id="calibre_link-666"><span class="sans_futura_std_bold_b_"><span class="sans_futura_std_bold_b_">表 2-4：</span></span><span class="thesansmonocd_w5regular_">not</span> <span class="sans_futura_std_book_">演算子の真理値表</span></p></caption>

<thead class="calibre13">
<tr class="calibre14">
<th class="tch" scope="col"><p class="tch1"><span class="sans_futura_std_bold_b_">式</span></p></th>
<th class="tch" scope="col"><p class="tch1"><span class="sans_futura_std_bold_b_">値（計算結果）</span></p></th>
</tr>
</thead>
<tbody class="calibre15">
<tr class="calibre16">
<td class="tbf"><p class="tch1"><span class="thesansmonocd_w5regular_">not True</span></p></td>
<td class="tbf"><p class="tch1"><span class="thesansmonocd_w5regular_">False</span></p></td>
</tr>
<tr class="calibre14">
<td class="tbl"><p class="tch1"><span class="thesansmonocd_w5regular_">not False</span></p></td>
<td class="tbl"><p class="tch1"><span class="thesansmonocd_w5regular_">True</span></p></td>
</tr>
</tbody>
</table>
</section>
<section type="division" aria-labelledby="sec4">
<h3 class="h" id="calibre_link-1438"><span id="calibre_link-47"></span><span class="sans_futura_std_bold_b_">ブール演算子と比較演算子を同時に使う</span></h3>
<p class="tni">比較演算子はブール値に評価しますから、これをブール演算子とともに使うことができます。</p>
<p class="tx"><span class="thesansmonocd_w5regular_">and</span>演算子、<span class="thesansmonocd_w5regular_">or</span>演算子、<span class="thesansmonocd_w5regular_">not</span>演算子は、<span class="thesansmonocd_w5regular_">True</span>と<span class="thesansmonocd_w5regular_">False</span>を取るのでブール演算子と呼ばれていることを思い出してください。<span class="thesansmonocd_w5regular_">4 &lt; 5</span>はブール値そのものではありませんが、ブール値に評価される式です。対話型シェルで比較演算子を用いたブール式を試してみましょう。</p>
<pre class="pre"><code class="calibre9">&gt;&gt;&gt; <b class="calibre10">(4 &lt; 5) and (5 &lt; 6)</b>
True
&gt;&gt;&gt; <b class="calibre10">(4 &lt; 5) and (9 &lt; 6)</b>
False
&gt;&gt;&gt; <b class="calibre10">(1 == 2) or (2 == 2)</b>
True
</code></pre>
<p class="tx">式は左から右へと評価していきます。順番に評価を行い、式全体を一つのブール値に評価します。<span class="thesansmonocd_w5regular_">(4 &lt; 5) and (5 &lt; 6)</span>は次のように評価されていきます。</p>
<figure class="img"><img class="img2" id="calibre_link-1320" src="images/000108.jpg" alt="" />
<figcaption><p class="cap"></p></figcaption>
</figure>
<p class="tx">複数のブール演算子を一つの式で使っても構いません。</p>
<pre class="pre"><code class="calibre9">&gt;&gt;&gt; <b class="calibre10">spam = 4</b>
&gt;&gt;&gt; <b class="calibre10">2 + 2 == spam and not 2 + 2 == (spam + 1) and 2 * 2 == 2 + 2</b>
True
</code></pre>
<p class="tx">数学演算子と同じように、ブール演算子にも優先順位があります。Pythonでは、数学演算子と比較演算子を評価してから、<span class="thesansmonocd_w5regular_">not</span>演算子を評価し、次に<span class="thesansmonocd_w5regular_">and</span>演算子を評価して、その次に<span class="thesansmonocd_w5regular_">or</span>演算子を評価します。</p>
</section>
<section type="division" aria-labelledby="sec5">
<h3 class="h" id="calibre_link-1439"><span id="calibre_link-48"></span><span class="sans_futura_std_bold_b_">フロー制御の構成要素</span></h3>
<p class="tni">フロー制御文は、<i class="calibre5">条件</i>部分で始まり、<i class="calibre5">節</i>が続きます（条件部分がないことはありますが、節は必ずあります）。Python固有のフロー制御に入る前に、条件とブロックについて説明します。</p>
<section type="division" aria-labelledby="sec6">
<h4 class="h1" id="calibre_link-1440"><span id="calibre_link-49"></span><span class="sans_futura_std_heavy_oblique_bi_">条件</span></h4>
<p class="tni">これまでに見てきたブール式はすべて条件とみなすことができます。<i class="calibre5">条件</i>はブール式と同じものですが、フロー制御文では特に条件と呼びます。条件は必ず<span class="thesansmonocd_w5regular_">True</span>または<span class="thesansmonocd_w5regular_">False</span>のブール値に評価されます。条件が<span class="thesansmonocd_w5regular_">True</span>または<span class="thesansmonocd_w5regular_">False</span>のいずれであるかによって、フロー制御文の動作が決まります。よって、ほぼすべてのフロー制御で条件を用います。英語で「もしこの条件が真であればこれをして、そうでなければあれをする」のように読めるコードを書くことがよくあります。「この条件が真である間はこの命令を繰り返す」のように読めるコードを書くこともあるでしょう。</p>
</section>
<section type="division" aria-labelledby="sec7">
<h4 class="h1" id="calibre_link-1441"><span id="calibre_link-50"></span><span class="sans_futura_std_heavy_oblique_bi_">コードブロック</span></h4>
<p class="tni">Pythonのコードの行は、<i class="calibre5">ブロック</i>に分けられます。コード行のインデント（字下げ）によりどこが一つのブロックかがわかります。ブロックには4つのルールがあります。</p>
<ul class="ul">
<li class="bl">新しいブロックはインデントが増える場所で始まります。</li>
<li class="bl">ブロックはほかのブロックを含むことができます。</li>
<li class="bl">ブロックはインデントが減る場所で終わります。</li>
<li class="bl">コロンで終わる文の直後から新しいブロックが始まります。</li>
</ul>
<p class="tx">ブロックはインデントによりすぐに見てわかります。以下に示す簡単なプログラムでブロックを探してみてください。</p>
<pre class="pre"><code class="calibre9">username = 'Mary'
password = 'swordfish'
if username == 'Mary':
  <span class="code_codeannotation" aria-label="annotation1">❶</span> print('Hello, Mary')
    if password == 'swordfish':
      <span class="code_codeannotation" aria-label="annotation2">❷</span> print('Access granted.')
    else:
      <span class="code_codeannotation" aria-label="annotation3">❸</span> print('Wrong password.')
</code></pre>
<p class="tx">最初のブロック（<span class="codeannotation" aria-label="annotation1">➊</span>）は<span class="thesansmonocd_w5regular_">print('Hello, Mary')</span>の行から始まり、それ以下の行全部です。このブロックの中に別のブロック（<span class="codeannotation" aria-label="annotation2">➋</span>）があります。<span class="thesansmonocd_w5regular_">print('Access Granted.')</span>という一行だけのブロックです。3つ目のブロック（<span class="codeannotation" aria-label="annotation3">➌</span>）も一行です。<span class="thesansmonocd_w5regular_">print('Wrong password.')</span>の行です。</p>
</section>
<section type="division" aria-labelledby="sec8">
<h4 class="h1" id="calibre_link-1442"><span id="calibre_link-51"></span><span class="sans_futura_std_heavy_oblique_bi_">プログラム実行</span></h4>
<p class="tni">前章の<i class="calibre5">hello.py</i>プログラムでは、Pythonが最初の行から順番に命令を実行しました。<i class="calibre5">プログラム実行</i>とは現在実行中の命令を示す用語です。実行ごとに画面上でソースコードの各行を指で追っていくと、その指がプログラム実行であると考えることができます。</p>
<p class="tx">すべてのプログラム実行が上から順に行われるとは限りません。フロー制御のあるプログラムを指で追うとするなら、条件に応じてソースコードを飛び回ります。</p>
</section>
</section>
<section type="division" aria-labelledby="sec9">
<span role="doc-pagebreak" type="pagebreak" id="calibre_link-1159" aria-label="35"></span>
<h3 class="h" id="calibre_link-1443"><span id="calibre_link-52"></span><span class="sans_futura_std_bold_b_">フロー制御文</span></h3>
<p class="tni">それではフロー制御で最も重要な部分である文に進みましょう。図 2-1のフローチャートではひし形で示されていた部分で、プログラムの判定部分です。</p>
<section type="division" aria-labelledby="sec10">
<h4 class="h1" id="calibre_link-1444"><span id="calibre_link-53"></span><span class="sans_futura_std_heavy_oblique_bi_">if</span></h4>
<p class="tni">フロー制御文の中でも一番よく使うのは <span class="thesansmonocd_w5regular_">if</span>文です。<span class="thesansmonocd_w5regular_">if</span>文の節（<span class="thesansmonocd_w5regular_">if</span>文のあとに続くブロック）は、if文の条件が<span class="thesansmonocd_w5regular_">True</span>の場合に実行されます。条件が<span class="thesansmonocd_w5regular_">False</span>の場合は飛ばされます。</p>
<p class="tx"><span class="thesansmonocd_w5regular_">if</span>文は、「もしこの条件が真であれば、ifに続く節のコードを実行してください」と読めます。Pythonで<span class="thesansmonocd_w5regular_">if</span>文は次のように書きます。</p>
<ul class="ul">
<li class="bl"><span class="thesansmonocd_w5regular_">if</span>というキーワード</li>
<li class="bl">条件（<span class="thesansmonocd_w5regular_">True</span>または<span class="thesansmonocd_w5regular_">False</span>に評価される式）</li>
<li class="bl">コロン</li>
<li class="bl">インデントされたコードブロック（<span class="thesansmonocd_w5regular_">if</span>節または<span class="thesansmonocd_w5regular_">if</span>ブロックと呼ばれます）</li>
</ul>
<p class="tx">例えば、名前がAliceかどうかを判定するコードはこのように書きます。</p>
<pre class="pre"><code class="calibre9">name = 'Alice'
if name == 'Alice':
    print('Hi, Alice.')
</code></pre>
<p class="tx">フロー制御文はすべて行末にコロンがあり、コードブロック（節）が続きます。この例では、<span class="thesansmonocd_w5regular_">if</span>節は<span class="thesansmonocd_w5regular_">print('Hi, Alice.')</span>のブロックです。図2-2はこのコードのフローチャートです。</p>
<span role="doc-pagebreak" type="pagebreak" id="calibre_link-1129" aria-label="36"></span>
<figure class="img"><img class="img3" id="calibre_link-668" src="images/000049.jpg" alt="" />
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">図 2-2：<span class="sans_futura_std_book_oblique_i_">if</span><span class="sans_futura_std_book_oblique_i_">文のフローチャート</span></p></figcaption>
</figure>
<p class="tx"><span class="thesansmonocd_w5regular_">name</span>変数の値を<span class="thesansmonocd_w5regular_">'Alice'</span>以外の文字列に変えてもう一度実行してみてください。“Hi, Alice.”が画面に表示されないはずです。その部分の実行が飛ばされたからです。</p>
</section>
<section type="division" aria-labelledby="sec11">
<h4 class="h1" id="calibre_link-1445"><span id="calibre_link-54"></span><span class="sans_futura_std_heavy_oblique_bi_">else</span></h4>
<p class="tni"><span class="thesansmonocd_w5regular_">if</span>節のあとに<span class="thesansmonocd_w5regular_">else</span>文が続くことがあります。<span class="thesansmonocd_w5regular_">else</span>節は<span class="thesansmonocd_w5regular_">if</span>文の条件が<span class="thesansmonocd_w5regular_">False</span>である場合にだけ実行されます。<span class="thesansmonocd_w5regular_">else</span>文は、「この条件が真であれば、ifに続く節のコードを実行してください。さもなければ、elseに続く節のコードを実行してください。」と読めます。<span class="thesansmonocd_w5regular_">else</span>文に条件はありません。よって、<span class="thesansmonocd_w5regular_">else</span>文は常に次のような形になります。</p>
<ul class="ul">
<li class="bl"><span class="thesansmonocd_w5regular_">else</span>というキーワード</li>
<li class="bl">コロン</li>
<li class="bl">インデントされたコードブロック（<span class="thesansmonocd_w5regular_">else</span>節または<span class="thesansmonocd_w5regular_">else</span>ブロックと呼ばれます）</li>
</ul>
<p class="tx">Aliceの例に戻って、Aliceではない名前の人に向けたあいさつをするために<span class="thesansmonocd_w5regular_">else</span>文を使ってみます。</p>
<pre class="pre"><code class="calibre9">name = 'Alice'
if name == 'Alice':
<span role="doc-pagebreak" type="pagebreak" id="calibre_link-1127" aria-label="37"></span>    print('Hi, Alice.')
else:
    print('Hello, stranger.')
</code></pre>
<p class="tx">図2-3はこのコードのフローチャートです。</p>
<figure class="img"><img class="img3" id="calibre_link-670" src="images/000050.jpg" alt="" />
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">図  2-3：</span> <span class="sans_thesansmonocd_w5regular_italic_">else</span><span class="sans_futura_std_book_oblique_i_">文のフローチャート</span></p></figcaption>
</figure>
<p class="tx">name変数の値を<span class="thesansmonocd_w5regular_">'Alice'</span>以外の文字列に変えてもう一度実行してみてください。<span class="thesansmonocd_w5regular_">'Hi, Alice.'</span>ではなく<span class="thesansmonocd_w5regular_">'Hello, stranger.'</span>と画面に表示されるはずです。</p>
</section>
<section type="division" aria-labelledby="sec12">
<h4 class="h1" id="calibre_link-1446"><span id="calibre_link-55"></span><span class="sans_futura_std_heavy_oblique_bi_">elif</span></h4>
<p class="tni">2つの節のうち1つだけを実行したい場合は、<span class="thesansmonocd_w5regular_">if</span> と<span class="thesansmonocd_w5regular_">else</span>を使います。<i class="calibre5">たくさん</i>の節のうちどれか1つだけを実行したい場合があるかもしれません。<span class="thesansmonocd_w5regular_">elif</span>文は “else if” という意味の文であり、<span class="thesansmonocd_w5regular_">if</span>文または<span class="thesansmonocd_w5regular_">elif</span>文に続きます。それ以前の条件がすべて<span class="thesansmonocd_w5regular_">False</span>の場合にのみ判定される条件です。<span class="thesansmonocd_w5regular_">elif</span>文は常に次のような形になります。</p>
<ul class="ul">
<li class="bl"><span class="thesansmonocd_w5regular_">elif</span>というキーワード</li>
<li class="bl">条件（<span class="thesansmonocd_w5regular_">True</span>または<span class="thesansmonocd_w5regular_">False</span>に評価される式）</li>
<li class="bl">コロン</li>
<li class="bl"><span role="doc-pagebreak" type="pagebreak" id="calibre_link-1447" aria-label="38"></span>インデントされたコードブロック（<span class="thesansmonocd_w5regular_">elif</span>節または<span class="thesansmonocd_w5regular_">elif</span>ブロックと呼ばれます）</li>
</ul>
<p class="tx"><span class="thesansmonocd_w5regular_">elif</span>を先ほどの名前判定プログラムに追加してみましょう。</p>
<pre class="pre"><code class="calibre9">name = 'Alice'
age = 33
if name == 'Alice':
    print('Hi, Alice.')
elif age &lt; 12:
    print('You are not Alice, kiddo.')
</code></pre>
<p class="tx">年齢を判定して12歳よりも若ければ別の内容を表示します。図2-4はこのコードのフローチャートです。</p>
<figure class="img"><img class="img3" id="calibre_link-672" src="images/000051.jpg" alt="" />
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">図 2-4：</span><span class="sans_thesansmonocd_w5regular_italic_">elif</span><span class="sans_futura_std_book_oblique_i_">文のフローチャート</span></p></figcaption>
</figure>
<p class="tx"><span role="doc-pagebreak" type="pagebreak" id="calibre_link-1246" aria-label="39"></span><span class="thesansmonocd_w5regular_">age &lt; 12</span>が<span class="thesansmonocd_w5regular_">True</span>で<span class="thesansmonocd_w5regular_">name</span> <span class="thesansmonocd_w5regular_">==</span> <span class="thesansmonocd_w5regular_">'Alice'</span>が<span class="thesansmonocd_w5regular_">False</span>の場合に<span class="thesansmonocd_w5regular_">elif</span>節が実行されます。どちらの条件も<span class="thesansmonocd_w5regular_">False</span>の場合は、どちらの節も飛ばされます。少なくとも１つの節の実行が保証される<i class="calibre5">わけではありません</i>。一連の<span class="thesansmonocd_w5regular_">elif</span>文に続く節のうち、一つが実行されるか一つも実行されないかです。条件が<span class="thesansmonocd_w5regular_">True</span>になれば、残りの<span class="thesansmonocd_w5regular_">elif</span>節は飛ばされます。例として、新しいファイルエディタウィンドウを開いて以下のコードを<i class="calibre5">vampire.py</i>という名前で保存してください。</p>
<pre class="pre"><code class="calibre9">name = 'Carol'
age = 3000
if name == 'Alice':
    print('Hi, Alice.')
elif age &lt; 12:
    print('You are not Alice, kiddo.')
elif age &gt; 2000:
    print('Unlike you, Alice is not an undead, immortal vampire.')
elif age &gt; 100:
    print('You are not Alice, grannie.')
</code></pre>
<p class="tx">名前判定プログラムに<span class="thesansmonocd_w5regular_">age</span>（年齢）によって異なる出力をする<span class="thesansmonocd_w5regular_">elif</span>文を2つ追加しました。図2-5はこのコードのフローチャートです。</p>
<span role="doc-pagebreak" type="pagebreak" id="calibre_link-1448" aria-label="40"></span>
<figure class="img"><img class="img3" id="calibre_link-674" src="images/000052.jpg" alt="" />
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">図 2-5：複数の</span><span class="sans_thesansmonocd_w5regular_italic_">elif</span><span class="sans_futura_std_book_oblique_i_">文がある</span><span class="sans_futura_std_book_">vampire.py</span><span class="sans_futura_std_book_oblique_i_">プログラムのフローチャート</span></p></figcaption>
</figure>
<p class="tx"><span class="thesansmonocd_w5regular_">elif</span> 文の順番が重要です。順番を変えるとバグが入り込みます。条件が<span class="thesansmonocd_w5regular_">True</span>になれば残りの<span class="thesansmonocd_w5regular_">elif</span>節は飛ばされることを思い出してください。<i class="calibre5">vampire.py</i>の節の順番を変えると問題が発生します。次のようにコードを変更して<i class="calibre5">vampire2.py</i>という名前で保存してください。</p>
<pre class="pre"><code class="calibre9">name = 'Carol'
age = 3000
if name == 'Alice':
    print('Hi, Alice.')
elif age &lt; 12:
    print('You are not Alice, kiddo.')
<span class="codeannotated_codeannotation" aria-label="annotation1">❶</span> elif age &gt; 100:
    print('You are not Alice, grannie.')
elif age &gt; 2000:
    print('Unlike you, Alice is not an undead, immortal vampire.')
</code></pre>
<p class="tx">コード実行時に変数<span class="thesansmonocd_w5regular_">age</span>に格納されている値が<span class="thesansmonocd_w5regular_">3000</span>だとしましょう。<span class="thesansmonocd_w5regular_">'Unlike you, Alice is not an undead, immortal vampire.'</span>という文字列が表示されると思うかもしれません。しかし、3,000は100よりも大きく、<span class="thesansmonocd_w5regular_">age &gt; 100</span>の条件が<span class="thesansmonocd_w5regular_">True</span>になりますから（<span class="codeannotation" aria-label="annotation1">➊</span>）、<span class="thesansmonocd_w5regular_">'You are not Alice, grannie.'</span>が表示され、残りの<span class="thesansmonocd_w5regular_">elif</span>文は飛ばされます。最大でも1つの節しか実行されません。<span class="thesansmonocd_w5regular_">elif</span>節では順番が重要なのです。</p>
<p class="tx">図2-6はこのコードのフローチャートです。<span class="thesansmonocd_w5regular_">age &gt; 100</span>と<span class="thesansmonocd_w5regular_">age &gt; 2000</span>が入れ替わっています。</p>
<span role="doc-pagebreak" type="pagebreak" id="calibre_link-1449" aria-label="42"></span>
<figure class="img"><img class="img3" id="calibre_link-676" src="images/000053.jpg" alt="" />
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">図 2-6：</span><span class="sans_futura_std_book_">vampire2.py</span><span class="sans_futura_std_book_oblique_i_">プログラムのフローチャート。Xの道を通ることは論理的にありえません。というのも、</span><span class="sans_thesansmonocd_w5regular_italic_">age</span><span class="sans_futura_std_book_oblique_i_">が</span><span class="sans_thesansmonocd_w5regular_italic_">2000</span><span class="sans_futura_std_book_oblique_i_">よりも大きければ、100より大きいという条件がすでに満たされてしまっているからです。</span></p></figcaption>
</figure>
<p class="tx">最後の<span class="thesansmonocd_w5regular_">elif</span>文のあとに<span class="thesansmonocd_w5regular_">else</span>文を入れることもできます。その場合は、どれか1つの節が確実に実行されます。<span class="thesansmonocd_w5regular_">if</span>文と<span class="thesansmonocd_w5regular_">elif</span>文の条件がすべて<span class="thesansmonocd_w5regular_">False</span>であれば、<span class="thesansmonocd_w5regular_">else</span>節が実行されます。<span class="thesansmonocd_w5regular_">if</span>節、<span class="thesansmonocd_w5regular_">elif</span>節、<span class="thesansmonocd_w5regular_">else</span>節を使って名前判定プログラムを作り直してみましょう。</p>
<pre class="pre"><code class="calibre9">name = 'Carol'
age = 3000
if name == 'Alice':
    print('Hi, Alice.')
elif age &lt; 12:
    print('You are not Alice, kiddo.')
else:
    print('You are neither Alice nor a little kid.')
</code></pre>
<p class="tx">図2-7は<i class="calibre5">littleKid.py</i>という名前で保存した新しいコードのフローチャートです。</p>
<figure class="img"><img class="img3" id="calibre_link-678" src="images/000054.jpg" alt="" />
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">図 2-7：</span> <span class="sans_futura_std_book_">littleKid.py</span><span class="sans_futura_std_book_oblique_i_">プログラムのフローチャート</span></p></figcaption>
</figure>
<p class="tx">このコードは、「この条件が真であれば、ifに続く節のコードを実行してください。最初の条件が真ではなく次の条件が真であれば、elifに続く節のコードを実行してください。それ以外の場合は、elseに続くコードを実行してください。」と読めます。<span class="thesansmonocd_w5regular_">if</span>文と<span class="thesansmonocd_w5regular_">elif</span>文と<span class="thesansmonocd_w5regular_">else</span>文をいっしょに使うときには、図2-6のようなバグを生じさせないように次のルールを念頭に置いてください。<span class="thesansmonocd_w5regular_">if</span>文は最初に一つだけあります。<span class="thesansmonocd_w5regular_">elif</span>文は<span class="thesansmonocd_w5regular_">if</span>文のあとに来ます。確実に一つの節を実行することを保証したければ、<span class="thesansmonocd_w5regular_">else</span> 文で締めます。</p>
<p class="tx">ここまで説明してきたように、フロー制御文を使うと、プログラムを洗練させることができますが、複雑になります。安心してください、コードを書く練習を積むと、こうした複雑なコードに慣れてきます。プログラマなら誰でも、<span class="thesansmonocd_w5regular_">&lt;=</span>ではなく <span class="thesansmonocd_w5regular_">&lt;</span>と書いたせいでプログラムが動作せず1時間を無駄にしたといった経験をするものです。誰でもこうした些細なミスをします。</p>
</section>
</section>
<section type="division" aria-labelledby="sec13">
<h3 class="h" id="calibre_link-1450"><span id="calibre_link-56"></span><span class="sans_futura_std_bold_b_">短いプログラム：反対言葉の日（訳注：事実と反対のことを言うことにする子どもの遊び）</span></h3>
<p class="tni">ブール値と<span class="thesansmonocd_w5regular_">if</span>-<span class="thesansmonocd_w5regular_">else</span>文を使った以下のコードを<i class="calibre5">oppositeday.py</i>という名前で保存してください。</p>
<pre class="pre"><code class="calibre9">today_is_opposite_day = True

# today_is_opposite_dayに応じてsay_it_is_opposite_dayを設定する
<span class="codeannotated_codeannotation" aria-label="annotation1">❶</span> if today_is_opposite_day == True:
    say_it_is_opposite_day = True
else:
    say_it_is_opposite_day = False

# 反対言葉の日ならsay_it_is_opposite_dayのブール値を反転する
if today_is_opposite_day == True:
  <span class="code_codeannotation" aria-label="annotation2">❷</span> say_it_is_opposite_day = not say_it_is_opposite_day

# 今日が反対言葉の日かどうかを言う
if say_it_is_opposite_day == True:
    print('Today is Opposite Day.')
else:
    print('Today is not Opposite Day.')
</code></pre>
<p class="tx">このプログラムを実行すると、<span class="thesansmonocd_w5regular_">'Today is not Opposite Day.'</span>と表示されます。このコードには2つの変数があります。プログラムの冒頭で、変数<span class="thesansmonocd_w5regular_">today_is_opposite_day</span>に<span class="thesansmonocd_w5regular_">True</span>が格納されます。その次の<span class="thesansmonocd_w5regular_">if</span>文では、その変数が<span class="thesansmonocd_w5regular_">True</span>かどうかを判定しています（真だと判定されます）(<span class="codeannotation" aria-label="annotation1">❶</span>)。そして、変数<span class="thesansmonocd_w5regular_">say_it_is_opposite_day</span>に<span class="thesansmonocd_w5regular_">True</span>を格納します。この<span class="thesansmonocd_w5regular_">if</span>文が偽だと判定されれば、変数<span class="thesansmonocd_w5regular_">say_it_is_opposite_day</span><span class="thesansmonocd_w5regular_">False</span>を格納します。2つ目の<span class="thesansmonocd_w5regular_">if</span>文は変数<span class="thesansmonocd_w5regular_">today_is_opposite_day</span>が<span class="thesansmonocd_w5regular_">True</span>かどうかを判定しています（真だと判定されます）。そしてその変数を<i class="calibre5">トグル</i>（ブール値を反転）します(<span class="codeannotation" aria-label="annotation2">❷</span>)。最後に、3つ目の<span class="thesansmonocd_w5regular_">if</span>文は変数<span class="thesansmonocd_w5regular_">say_it_is_opposite_day</span>が<span class="thesansmonocd_w5regular_">True</span>かどうかを判定します（偽だと判定されます）。そして、真であれば<span class="thesansmonocd_w5regular_">'Today is Opposite Day.'</span>と表示し、偽であれば<span class="thesansmonocd_w5regular_">'Today is not Opposite Day.'</span>と表示します。</p>
<p class="tx">プログラムの最初の行を<span class="thesansmonocd_w5regular_">today_is_opposite_day</span> <span class="thesansmonocd_w5regular_">=</span> <span class="thesansmonocd_w5regular_">False</span>に変えてプログラムをもう一度実行しても、<span class="thesansmonocd_w5regular_">'Today is not Opposite Day.'</span>と表示されます。最初の<span class="thesansmonocd_w5regular_">if</span>-<span class="thesansmonocd_w5regular_">else</span>文で変数<span class="thesansmonocd_w5regular_">say_it_is_opposite_day</span> に<span class="thesansmonocd_w5regular_">False</span>が格納され、2つ目の<span class="thesansmonocd_w5regular_">if</span>文の条件が偽となりその節は飛ばされ、3つ目の<span class="thesansmonocd_w5regular_">if</span>文の条件が偽となるため、<span class="thesansmonocd_w5regular_">'Today is not Opposite Day.'</span>が表示されます。</p>
<p class="tx">今日が反対言葉の日でなければ、プログラムは正しく<span class="thesansmonocd_w5regular_">'Today is not Opposite Day.（今日は反対言葉の日ではありません）'</span>と表示します。今日が反対言葉の日なら、プログラムはこれまた正しく<span class="thesansmonocd_w5regular_">'Today is not Opposite Day.'</span>と表示します（反対言葉の日なので事実と反対のことを言います）。論理的に考えて、変数が<span class="thesansmonocd_w5regular_">True</span>であろうが<span class="thesansmonocd_w5regular_">False</span>であろうが、このプログラムが<span class="thesansmonocd_w5regular_">'Today is Opposite Day.'</span>と表示することは決してありません。このプログラム全体を<span class="thesansmonocd_w5regular_">print('Today is not Opposite Day.')</span>という1行に置き換えても同じプログラムです。プログラマは書いたコードの行数に応じて支払いを受けるわけではないのもうなずけます。</p>
</section>
<section type="division" aria-labelledby="sec14">
<h3 class="h" id="calibre_link-1451"><span id="calibre_link-57"></span><span class="sans_futura_std_bold_b_">短いプログラム：不正直な容量計算ツール</span></h3>
<p class="tni"><span>第1章</span>では、ハードドライブとフラッシュメモリの製造元が、異なるTBとGBの定義により、製品の容量についてうそをついていと書きました。容量がどれほど違うかを計算するプログラムを書いてみましょう。以下のコードを<i class="calibre5">dishonestcapacity.py</i>という名前で保存してください。</p>
<pre class="pre"><code class="calibre9">print('Enter TB or GB for the advertised unit:')
unit = input('&gt;')

# 宣伝がうそをついている容量を計算する
if unit == 'TB' or unit == 'tb':
    discrepancy = 1000000000000 / 1099511627776
elif unit == 'GB' or unit == 'gb':
    discrepancy = 1000000000 / 1073741824

print('Enter the advertised capacity:')
advertised_capacity = input('&gt;')
advertised_capacity = float(advertised_capacity)

# 実際の容量を計算し、100分の1の位に丸めて、
# 結合できるように文字列に変換する
real_capacity = str(round(advertised_capacity * discrepancy, 2))

print('The actual capacity is ' + real_capacity + ' ' + unit)
</code></pre>
<p class="tx">このプログラムは、ユーザーにハードドライブの単位をTBかGBで入力するように求めます。</p>
<pre class="pre"><code class="calibre9"># 宣伝がうそをついている容量を計算する
if unit == 'TB' or unit == 'tb':
    discrepancy = 1000000000000 / 1099511627776
elif unit == 'GB' or unit == 'gb':
    discrepancy = 1000000000 / 1073741824
</code></pre>
<p class="tx">TBはGBよりも大きく、単位が大きければ大きいほど、宣伝されている容量と実際の容量との乖離が大きくなります。<span class="thesansmonocd_w5regular_">if</span>文と<span class="thesansmonocd_w5regular_">elif</span>文は、<span class="thesansmonocd_w5regular_">or</span>ブール演算子を使っていて、ユーザーが単位を小文字で入力しても大文字で入力しても動作するようになっています。ユーザーがそれ以外の入力をすると、<span class="thesansmonocd_w5regular_">if</span>節も<span class="thesansmonocd_w5regular_">elif</span>節も実行されないので、変数discrepancyへの代入は行われません。プログラムが変数discrepancyを使おうとしたときにエラーが発生します。これについてはあとで対処します。</p>
<p class="tx">次に、ユーザーは指定した単位で宣伝されているサイズを入力します。</p>
<pre class="pre"><code class="calibre9"># 実際の容量を計算し、100分の1の位に丸めて、
# 結合できるように文字列に変換する
real_capacity = str(round(advertised_capacity * discrepancy, 2))
</code></pre>
<p class="tx">この1行でたくさんのことをしています。ユーザーが単位とサイズを10TBと入力したとしましょう。この行のコードの一番内側から見ていくと、<span class="thesansmonocd_w5regular_">advertised_capacity</span>と<span class="thesansmonocd_w5regular_">discrepancy</span>のかけ算が行われています。このようにして実際の容量を計算するのですが、<span class="thesansmonocd_w5regular_">9.094947017729282</span>のように小数点以下の桁数が多くなってしまいます。そこで、この数値を<span class="thesansmonocd_w5regular_">round()</span>関数の第一引数として渡し、第二引数に<span class="thesansmonocd_w5regular_">2</span>を指定します。この<span class="thesansmonocd_w5regular_">round()</span>関数の呼び出しは、先の例で言うと、<span class="thesansmonocd_w5regular_">9.09</span>を返します。これは浮動小数点数値ですが、次の行でメッセージの文字列と結合するために文字列がほしいです。そのために<span class="thesansmonocd_w5regular_">str()</span>関数に渡します。Pythonはこの1行のコードを以下のように評価します。</p>
<figure class="img"><img class="img3" id="calibre_link-1328" src="images/000109.jpg" alt="" />
<figcaption><p class="cap"></p></figcaption>
</figure>
<p class="tx">ユーザーが単位として<i class="calibre5">TB</i>、<i class="calibre5">tb</i>、<i class="calibre5">GB</i>、<i class="calibre5">gb</i>以外の入力をすると、<span class="thesansmonocd_w5regular_">if</span>文の条件も<span class="thesansmonocd_w5regular_">elif</span>文の条件も<span class="thesansmonocd_w5regular_">False</span>になり、変数<span class="thesansmonocd_w5regular_">discrepancy</span>は作成されません。しかし、Pythonがその存在しない変数を使おうとするまでは、ユーザーが問題に気づきません。Pythonは<span class="thesansmonocd_w5regular_">NameError: name 'discrepancy' is not defined</span>エラーを発生させ、<span class="thesansmonocd_w5regular_">real_capacity</span>が代入される行番号を指摘します。</p>
<p class="tx">このバグの本当の原因は、ユーザーが不適切な単位を入力した箇所です。このエラーに対処する方法はいろいろありますが、一番簡単なのは<span class="thesansmonocd_w5regular_">else</span>節で“You must enter TB or GB”（TBかGBを入力してください）のようなメッセージを表示し、<span class="thesansmonocd_w5regular_">sys.exit()</span>関数を呼び出してプログラムを終了することです（この関数については次の章で扱います）。</p>
<p class="tx">プログラムの最終行は、メッセージの文字列と<span class="thesansmonocd_w5regular_">real_capacity</span>と<span class="thesansmonocd_w5regular_">unit</span>を結合して、ハードドライブの実際の容量を表示します。</p>
<pre class="pre"><code class="calibre9">print('The actual capacity is ' + real_capacity + ' ' + unit)</code></pre>
<p class="tx">ハードドライブとフラッシュメモリの製造元は、さらにうそをついていることがあります。私は256GBのSDカードをノートパソコンのバックアップに使っています。真実のGBであれば274,877,906,944バイトになるはずですが、うそのGBだと256,000,000,000バイトです。さらに、私のコンピュータが実際に認識したのは255,802,212,352バイトです。広告されているよりも大きいサイズになるのではなく小さいサイズになるように実際のサイズがずれるのはおもしろいですね。</p>
</section>
<section type="conclusion" role="doc-conclusion" aria-labelledby="sec15">
<h3 class="h" id="calibre_link-1452"><span id="calibre_link-58"></span><span class="sans_futura_std_bold_b_">まとめ</span></h3>
<p class="tni">条件で<span class="thesansmonocd_w5regular_">True</span>または<span class="thesansmonocd_w5regular_">False</span>に評価される式を使うと、コードのどの部分を実行してどの部分を飛ばすかを決められます。<span class="thesansmonocd_w5regular_">==</span>、<span class="thesansmonocd_w5regular_">!=</span>、<span class="thesansmonocd_w5regular_">&lt;</span>、<span class="thesansmonocd_w5regular_">&gt;</span>、<span class="thesansmonocd_w5regular_">&lt;=</span>、<span class="thesansmonocd_w5regular_">&gt;=</span>の比較演算子を使ってブール値に評価される式を条件として使えます。<span class="thesansmonocd_w5regular_">and</span>、<span class="thesansmonocd_w5regular_">or</span>、<span class="thesansmonocd_w5regular_">not</span>のブール演算子を使って複数の式を組み合わせることもできます。Pythonはインデントでコードブロックを表します。この章では、<span class="thesansmonocd_w5regular_">if</span>、<span class="thesansmonocd_w5regular_">elif</span>、<span class="thesansmonocd_w5regular_">else</span>文でブロックを作りましたが、後の章で取り上げるように、それ以外にもブロックを使う場面があります。こうしたフロー制御文を活用すれば、賢いプログラムを書けます。</p>
</section>
<section type="division" aria-labelledby="sec16">
<h3 class="h" id="calibre_link-1453"><span id="calibre_link-59"></span><span class="sans_futura_std_bold_b_">練習問題</span></h3>
<p class="listnumber">  1. ブール型の2つの値を挙げてください。また、それらはどのように表記しますか？</p>
<p class="listnumber">  2. ブール演算子を3つ挙げてください。</p>
<p class="listnumber">  3. 各ブール演算子の真理値表（ブール値とブール演算子のすべての可能な組み合わせとその結果）を書き出してください。</p>
<p class="listnumber">  4. 次の式はどのように評価されますか？</p>
<pre class="pre"><code class="calibre9"><span class="thesansmonocd_w5regular_">(5 &gt; 4) and (3 == 5)</span>
not (5 &gt; 4)
(5 &gt; 4) or (3 == 5)
not ((5 &gt; 4) or (3 == 5))
(True and True) and (True == False)
(not False) or (not True)
</code></pre>
<p class="listnumber">  5. 比較演算子を6つ挙げてください。</p>
<p class="listnumber">  6. 等価演算子と代入演算子はどう違いますか？</p>
<p class="listnumber">  7. 条件とは何であり、どこで使うかを説明してください。</p>
<p class="listnumber">  8. 次のコード中で3つのブロックを判別してください。</p>
<pre class="pre"><code class="calibre9"><span class="thesansmonocd_w5regular_">spam = 0</span>
if spam == 10:
    print('eggs')
    if spam &gt; 5:
       print('bacon')
<span role="doc-pagebreak" type="pagebreak" id="calibre_link-1454" aria-label="48"></span>    else:
        print('ham')
    print('spam')
print('Done')
</code></pre>
<p class="listnumber">  9. <span class="thesansmonocd_w5regular_">spam</span>に格納されている値が、<span class="thesansmonocd_w5regular_">1</span>なら<span class="thesansmonocd_w5regular_">Hello</span>を、<span class="thesansmonocd_w5regular_">2</span>なら<span class="thesansmonocd_w5regular_">Howdy</span>を、その他の値なら<span class="thesansmonocd_w5regular_">Greetings!</span>を表示するコードを書いてください。</p>
</section>
</section>
</div>



</div>



</body></html>