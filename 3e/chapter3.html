<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"><link href="style.css" rel="stylesheet" type="text/css" /><title>Pythonで退屈な作業を自動化する
</title></head><body><div type="frontmatter" class="calibre" id="calibre_link-0">






<div type="bodymatter" class="calibre" id="calibre_link-60">
<section type="chapter" role="doc-chapter" aria-labelledby="ch3">
<span role="doc-pagebreak" type="pagebreak" id="calibre_link-1160" aria-label="49"></span>
<hgroup>
<h2 class="title" id="calibre_link-1455">
<span class="tpt"><span class="sans_dogma_ot_bold_b_">3</span></span>
<span class="ct"><span class="sans_dogma_ot_bold_b_">LOOPS</span></span>
</h2>
</hgroup>
<figure class="opener"><img class="opener1" src="images/000112.jpg" role="presentation" alt="" />
</figure>
<p class="introtni">In the previous chapter, you learned how to make programs run certain blocks of code while skipping others. But there’s more to flow control than this. In this chapter, you’ll learn how to repeatedly execute blocks of code using loops. Python’s two kinds of loops, <span class="sans_thesansmonocd_w5regular_">while</span> and <span class="sans_thesansmonocd_w5regular_">for</span>, open up the full power of automation, because they can run lines of code millions of times per second. You’ll also learn how to import code libraries, called <i class="calibre18">modules</i>, to make even more functions available to your programs.</p>
<section type="division" aria-labelledby="sec1">
<h3 class="h" id="calibre_link-1456"><span id="calibre_link-61"></span><span class="sans_futura_std_bold_b_">while Loop Statements</span></h3>
<p class="tni">You can make a block of code execute over and over again using a <span class="thesansmonocd_w5regular_">while</span> statement. The code in a <span class="thesansmonocd_w5regular_">while</span> clause will be executed as long as the <span role="doc-pagebreak" type="pagebreak" id="calibre_link-1457" aria-label="50"></span>statement’s condition is <span class="thesansmonocd_w5regular_">True</span>. In code, a <span class="thesansmonocd_w5regular_">while</span> statement always consists of the following:</p>
<ul class="ul">
<li class="bl">The <span class="thesansmonocd_w5regular_">while</span> keyword</li>
<li class="bl">A condition (that is, an expression that evaluates to <span class="thesansmonocd_w5regular_">True</span> or <span class="thesansmonocd_w5regular_">False</span>)</li>
<li class="bl">A colon</li>
<li class="bl">Starting on the next line, an indented block of code (called the <span class="thesansmonocd_w5regular_">while</span> clause or <span class="thesansmonocd_w5regular_">while</span> block)</li>
</ul>
<p class="tx">You can see that a <span class="thesansmonocd_w5regular_">while</span> statement looks similar to an <span class="thesansmonocd_w5regular_">if</span> statement. The difference is in how they behave. At the end of an <span class="thesansmonocd_w5regular_">if</span> clause, the program execution continues after the <span class="thesansmonocd_w5regular_">if</span> statement. But at the end of a <span class="thesansmonocd_w5regular_">while</span> clause, the program execution jumps back to the start of the <span class="thesansmonocd_w5regular_">while</span> statement. The <span class="thesansmonocd_w5regular_">while</span> clause is often called the <i class="calibre5">while loop</i> or just the <i class="calibre5">loop</i>.</p>
<p class="tx">Let’s look at an <span class="thesansmonocd_w5regular_">if</span> statement and a <span class="thesansmonocd_w5regular_">while</span> loop that use the same condition and take the same actions based on that condition. Here is the code with an <span class="thesansmonocd_w5regular_">if</span> statement:</p>
<pre class="pre"><code class="calibre9">spam = 0
if spam &lt; 5:
    print('Hello, world.')
    spam = spam + 1
</code></pre>
<p class="tx">Here is the code with a <span class="thesansmonocd_w5regular_">while</span> statement:</p>
<pre class="pre"><code class="calibre9">spam = 0
while spam &lt; 5:
    print('Hello, world.')
    spam = spam + 1
</code></pre>
<p class="tx">These statements are similar; both <span class="thesansmonocd_w5regular_">if</span> and <span class="thesansmonocd_w5regular_">while</span> check the value of <span class="thesansmonocd_w5regular_">spam</span>, and if it’s less than <span class="thesansmonocd_w5regular_">5</span>, they print a message. But when you run these two code snippets, something very different happens for each one. For the <span class="thesansmonocd_w5regular_">if</span> statement, the output is simply <span class="thesansmonocd_w5regular_">"Hello, world."</span> But for the <span class="thesansmonocd_w5regular_">while</span> statement, it’s <span class="thesansmonocd_w5regular_">"Hello, world."</span> repeated five times! Take a look at the flowcharts for these two pieces of code, Figures 3-1 and 3-2, to see why this happens.</p>
<span role="doc-pagebreak" type="pagebreak" id="calibre_link-1458" aria-label="51"></span>
<figure class="img"><img class="img3" id="calibre_link-681" src="images/000085.jpg" alt="A flowchart that connects boxes with branching paths labeled “True” and “False.”" />
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">Figure 3-1: The flowchart for the if statement code</span> Description</p></figcaption>
</figure>
<p class="tx">The code with the <span class="thesansmonocd_w5regular_">if</span> statement checks the condition, and it prints <span class="thesansmonocd_w5regular_">"Hello, world."</span> only once if that condition is true. The code with the <span class="thesansmonocd_w5regular_">while</span> loop, on the other hand, will print it five times. The loop stops after five prints because the integer in <span class="thesansmonocd_w5regular_">spam</span> increases by one at the end of each loop iteration, which means that the loop will execute five times before <span class="thesansmonocd_w5regular_">spam &lt; 5</span> is <span class="thesansmonocd_w5regular_">False</span>.</p>
<span role="doc-pagebreak" type="pagebreak" id="calibre_link-1312" aria-label="52"></span>
<figure class="img"><img class="img1" id="calibre_link-682" src="images/000086.jpg" alt="A flowchart that connects boxes with branching paths labeled “True” and “False.”" />
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">Figure 3-2: The flowchart for the while statement code</span> Description</p></figcaption>
</figure>
<p class="tx">In the <span class="thesansmonocd_w5regular_">while</span> loop, the condition is always checked at the start of each <i class="calibre5">iteration</i> (that is, each time the loop is executed). If the condition is <span class="thesansmonocd_w5regular_">True</span>, then the clause is executed, and afterward, the condition is checked again. The first time the condition is found to be <span class="thesansmonocd_w5regular_">False</span>, the <span class="thesansmonocd_w5regular_">while</span> clause is skipped.</p>
<section type="division" aria-labelledby="sec2">
<h4 class="h1" id="calibre_link-1459"><span id="calibre_link-62"></span><span class="sans_futura_std_heavy_oblique_bi_">An Annoying while Loop</span></h4>
<p class="tni">Here’s a small example program that will keep asking you to type, literally, <span class="sans_thesansmonocd_w7bold_b_">your name</span>. Select <b class="calibre10">File</b><span class="listbullet_menuarrow"></span><b class="calibre10">New</b> to open a new file editor window, enter the following code, and save the file as <i class="calibre5">yourName.py</i>:</p>
<pre class="pre"><code class="calibre9">name = ''
while name != 'your name':
    print('Please type your name.')
    name = input('&gt;')
print('Thank you!')
</code></pre>
<p class="tx">First, the program sets the <span class="thesansmonocd_w5regular_">name</span> variable to an empty string. This is so that the <span class="thesansmonocd_w5regular_">name !=</span> <span class="thesansmonocd_w5regular_">'your name'</span> condition will evaluate to <span class="thesansmonocd_w5regular_">True</span> and the program execution will enter the <span class="thesansmonocd_w5regular_">while</span> loop’s clause.</p>
<p class="tx">The code inside this clause asks the user to type their name, which is assigned to the <span class="thesansmonocd_w5regular_">name</span> variable. Since this is the last line of the block, the execution moves back to the start of the <span class="thesansmonocd_w5regular_">while</span> loop and reevaluates the condition. If the value in <span class="thesansmonocd_w5regular_">name</span> is <i class="calibre5">not</i> equal to the string <span class="thesansmonocd_w5regular_">'your name'</span>, the condition is <span class="thesansmonocd_w5regular_">True</span>, and the execution enters the <span class="thesansmonocd_w5regular_">while</span> clause again.</p>
<p class="tx"><span role="doc-pagebreak" type="pagebreak" id="calibre_link-1460" aria-label="53"></span>But once the user literally enters <span class="thesansmonocd_w5regular_">your name</span>, the condition of the <span class="thesansmonocd_w5regular_">while</span> loop will be <span class="thesansmonocd_w5regular_">'your name' !=</span> <span class="thesansmonocd_w5regular_">'your name'</span>, which evaluates to <span class="thesansmonocd_w5regular_">False</span>. Now, instead of the program execution reentering the <span class="thesansmonocd_w5regular_">while</span> loop’s clause, Python skips past it and continues running the rest of the program. Figure 3-3 shows the flowchart for the <i class="calibre5">yourName.py</i> program.</p>
<figure class="img"><img class="img3" id="calibre_link-685" src="images/000087.jpg" alt="A flowchart that connects boxes with branching paths labeled “True” and “False.”" />
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">Figure 3-3: The flowchart for the</span> <span class="sans_futura_std_book_">yourName.py</span> <span class="sans_futura_std_book_oblique_i_">program</span> Description</p></figcaption>
</figure>
<p class="tx">Now let’s see <i class="calibre5">yourName.py</i> in action. Press F5 to run it, and enter something other than <span class="thesansmonocd_w5regular_">your name</span> a few times before you give the program what it wants:</p>
<pre class="pre"><code class="calibre9">Please type your name.
&gt;<b class="calibre10">Al</b>
Please type your name.
&gt;<b class="calibre10">Albert</b>
Please type your name.
&gt;<b class="calibre10">%#@#%*(^&amp;!!!</b>
Please type your name.
&gt;<b class="calibre10">your name</b>
Thank you!
</code></pre>
<p class="tx">If you never enter <span class="thesansmonocd_w5regular_">your name</span>, then the <span class="thesansmonocd_w5regular_">while</span> loop’s condition will never be <span class="thesansmonocd_w5regular_">False</span>, and the program will just keep asking you the question forever. Here, the <span class="thesansmonocd_w5regular_">input()</span> call lets the user enter the right string to make the program move on. In other programs, the condition might never actually <span role="doc-pagebreak" type="pagebreak" id="calibre_link-979" aria-label="54"></span>change, and that can be a problem. Let’s look at how you can break out of a <span class="thesansmonocd_w5regular_">while</span> loop.</p>
</section>
<section type="division" aria-labelledby="sec3">
<h4 class="h1" id="calibre_link-1461"><span id="calibre_link-63"></span><span class="sans_futura_std_heavy_oblique_bi_">break Statements</span></h4>
<p class="tni">There is a shortcut to getting the program execution to break out of a <span class="thesansmonocd_w5regular_">while</span> loop’s clause early. If the execution reaches a <span class="thesansmonocd_w5regular_">break</span> statement, it immediately exits the <span class="thesansmonocd_w5regular_">while</span> loop’s clause. In code, a <span class="thesansmonocd_w5regular_">break</span> statement simply contains the <span class="thesansmonocd_w5regular_">break</span> keyword.</p>
<p class="tx">Here’s a program that does the same thing as the previous <i class="calibre5">yourName.py</i> program but uses a <span class="thesansmonocd_w5regular_">break</span> statement to escape the loop. Enter the following code, and save the file as <i class="calibre5">yourName2.py</i>:</p>
<pre class="pre"><code class="calibre9">while True:
    print('Please type your name.')
    name = input('&gt;')
    if name == 'your name':
        break
print('Thank you!')
</code></pre>
<p class="tx">The first line creates an <i class="calibre5">infinite loop</i>; it is a <span class="thesansmonocd_w5regular_">while</span> loop whose condition is always <span class="thesansmonocd_w5regular_">True</span>. (The expression <span class="thesansmonocd_w5regular_">True</span>, after all, always evaluates to the value <span class="thesansmonocd_w5regular_">True</span>.) After the program execution enters this loop, it will exit the loop only when a <span class="thesansmonocd_w5regular_">break</span> statement is executed. (An infinite loop that <i class="calibre5">never</i> exits is a common programming bug.)</p>
<p class="tx">Just like before, this program asks the user to enter <span class="thesansmonocd_w5regular_">your name</span>. Now, however, while the execution is still inside the <span class="thesansmonocd_w5regular_">while</span> loop, an <span class="thesansmonocd_w5regular_">if</span> statement checks whether <span class="thesansmonocd_w5regular_">name</span> is equal to <span class="thesansmonocd_w5regular_">'your name'</span>. If this condition is <span class="thesansmonocd_w5regular_">True</span>, the <span class="thesansmonocd_w5regular_">break</span> statement is run, and the execution moves out of the loop to <span class="thesansmonocd_w5regular_">print('Thank you!')</span>. Otherwise, the <span class="thesansmonocd_w5regular_">if</span> statement clause that contains the <span class="thesansmonocd_w5regular_">break</span> statement is skipped, which puts the execution at the end of the <span class="thesansmonocd_w5regular_">while</span> loop. At this point, the program execution jumps back to the start of the <span class="thesansmonocd_w5regular_">while</span> statement to recheck the condition. Since this condition is merely the <span class="thesansmonocd_w5regular_">True</span> Boolean value, the execution enters the loop to ask the user to enter <span class="thesansmonocd_w5regular_">your name</span> again. See Figure 3-4 for this program’s flowchart.</p>
<span role="doc-pagebreak" type="pagebreak" id="calibre_link-1051" aria-label="55"></span>
<figure class="img"><img class="img3" id="calibre_link-687" src="images/000088.jpg" alt="A flowchart that connects boxes with branching paths labeled “True” and “False.”" />
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">Figure 3-4: The flowchart for the</span> <span class="sans_futura_std_book_">yourName2.py</span> <span class="sans_futura_std_book_oblique_i_">program with an infinite loop. Note that the X path will logically never happen, because the loop condition is always</span> <span class="sans_thesansmonocd_w5regular_italic_">True</span><span class="sans_futura_std_book_oblique_i_">.</span> Description</p></figcaption>
</figure>
<p class="tx">Run <i class="calibre5">yourName2.py</i>, and enter the same text you entered for <i class="calibre5">yourName.py</i>. The rewritten program should respond in the same way as the original.</p>
</section>
<section type="division" aria-labelledby="sec4">
<h4 class="h1" id="calibre_link-1462"><span id="calibre_link-64"></span><span class="sans_futura_std_heavy_oblique_bi_">continue Statements</span></h4>
<p class="tni">Like <span class="thesansmonocd_w5regular_">break</span> statements, we use <span class="thesansmonocd_w5regular_">continue</span> statements inside loops. When the program execution reaches a <span class="thesansmonocd_w5regular_">continue</span> statement, the program execution immediately jumps back to the start of the loop and reevaluates the loop’s condition. (This is also what happens when the execution reaches the end of the loop.)</p>
<aside class="box" aria-label="box-6">
<p class="bt" id="calibre_link-1463"><span role="doc-pagebreak" type="pagebreak" id="calibre_link-1194" aria-label="56"></span><span class="sans_futura_std_bold_b_">TRAPPED IN AN INFINITE LOOP?</span></p>
<p class="btni"><span class="sans_futura_std_book_">If you ever run a program that has a bug causing it to get stuck in an infinite loop, press CTRL-C. This will send a</span> <span class="thesansmonocd_w5regular_">KeyboardInterrupt</span> <span class="sans_futura_std_book_">error to your program and cause it to stop immediately. You can also click the Stop button at the top of the Mu window. Try stopping a program by creating a simple infinite loop in the file editor, and save the program as</span> <span class="sans_futura_std_book_oblique_i_">infiniteLoop.py</span><span class="sans_futura_std_book_">. If you are running the program from Mu, you can also click the Stop button:</span></p>
<pre class="pre"><code class="calibre9"><span class="thesansmonocd_w5regular_">while True:</span>
    print('Hello, world!')
</code></pre>
<p class="boxb-last"><span class="sans_futura_std_book_">When you run this program, it will print</span> <span class="thesansmonocd_w5regular_">Hello, world!</span> <span class="sans_futura_std_book_">to the screen forever because the</span> <span class="thesansmonocd_w5regular_">while</span> <span class="sans_futura_std_book_">statement’s condition is always</span> <span class="thesansmonocd_w5regular_">True</span><span class="sans_futura_std_book_">. CTRL-C is also handy if you want to simply terminate your program immediately, even if it’s not stuck in an infinite loop.</span></p>
</aside>
<p class="tx">Let’s use <span class="thesansmonocd_w5regular_">continue</span> to write a program that asks for a name and password. Enter the following code into a new file editor window and save the program as <i class="calibre5">swordfish.py</i>:</p>
<pre class="pre"><code class="calibre9">while True:
    print('Who are you?')
    name = input('&gt;')
  <span class="code_codeannotation" aria-label="annotation1">❶</span> if name != 'Joe':
      <span class="code_codeannotation" aria-label="annotation2">❷</span> continue
    print('Hello, Joe. What is the password? (It is a fish.)')
  <span class="code_codeannotation" aria-label="annotation3">❸</span> password = input('&gt;')
    if password == 'swordfish':
        <span class="code_codeannotation" aria-label="annotation4">❹</span> break
<span class="codeannotated_codeannotation" aria-label="annotation5">❺</span> print('Access granted.')   
</code></pre>
<p class="tx">If the user enters any name besides <span class="thesansmonocd_w5regular_">Joe</span> <span class="codeannotation" aria-label="annotation1">❶</span>, the <span class="thesansmonocd_w5regular_">continue</span> statement <span class="codeannotation" aria-label="annotation2">❷</span> causes the program execution to jump back to the start of the loop. When the program reevaluates the condition, the execution will always enter the loop, because the condition is simply the value <span class="thesansmonocd_w5regular_">True</span>. Once the user makes it past that <span class="thesansmonocd_w5regular_">if</span> statement, they are asked for a password <span class="codeannotation" aria-label="annotation3">❸</span>. If the password entered is <span class="thesansmonocd_w5regular_">swordfish</span>, the <span class="thesansmonocd_w5regular_">break</span> statement <span class="codeannotation" aria-label="annotation4">❹</span> is run, and the execution jumps out of the <span class="thesansmonocd_w5regular_">while</span> loop to print <span class="thesansmonocd_w5regular_">Access granted.</span> <span class="codeannotation" aria-label="annotation5">❺</span> Otherwise, the execution continues to the end of the <span class="thesansmonocd_w5regular_">while</span> loop, where it then jumps back to the start of the loop. See Figure 3-5 for this program’s flowchart.</p>
<span role="doc-pagebreak" type="pagebreak" id="calibre_link-1464" aria-label="57"></span>
<figure class="img"><img class="img1" id="calibre_link-689" src="images/000089.jpg" alt="A flowchart that connects boxes with branching paths labeled “True” and “False.”" />
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">Figure 3-5: The flowchart for the</span> <span class="sans_futura_std_book_">swordfish.py</span> <span class="sans_futura_std_book_oblique_i_">program. The X path will logically never happen, because the loop condition is always</span> <span class="sans_thesansmonocd_w5regular_italic_">True</span><span class="sans_futura_std_book_oblique_i_">.</span> Description</p></figcaption>
</figure>
<p class="tx"><span role="doc-pagebreak" type="pagebreak" id="calibre_link-975" aria-label="58"></span>Run this program and give it some input. Until you claim to be Joe, the program shouldn’t ask for a password, and once you enter the correct password, it should exit:</p>
<pre class="pre"><code class="calibre9">Who are you?
&gt;<b class="calibre10">I'm fine, thanks. Who are you?</b>
Who are you?
&gt;<b class="calibre10">Joe</b>
Hello, Joe. What is the password? (It is a fish.)
&gt;<b class="calibre10">Mary</b>
Who are you?
&gt;<b class="calibre10">Joe</b>
Hello, Joe. What is the password? (It is a fish.)
&gt;<b class="calibre10">swordfish</b>
Access granted.
</code></pre>
<aside class="box" aria-label="box-7">
<p class="bt" id="calibre_link-1465"><span class="sans_futura_std_bold_b_">“TRUTHY” AND “FALSEY” VALUES AND THE BOOL() FUNCTION</span></p>
<p class="btni"><span class="sans_futura_std_book_">Conditions will consider some values in other data types equivalent to</span> <span class="thesansmonocd_w5regular_">True</span> <span class="sans_futura_std_book_">or</span> <span class="thesansmonocd_w5regular_">False</span><span class="sans_futura_std_book_">. When used in conditions,</span> <span class="thesansmonocd_w5regular_">0</span><span class="sans_futura_std_book_">,</span> <span class="thesansmonocd_w5regular_">0.0</span><span class="sans_futura_std_book_">, and</span> <span class="thesansmonocd_w5regular_">''</span> <span class="sans_futura_std_book_">(the empty string) are considered</span> <span class="thesansmonocd_w5regular_">False</span><span class="sans_futura_std_book_">, while all other values are considered</span> <span class="thesansmonocd_w5regular_">True</span><span class="sans_futura_std_book_">. For example, look at the following program:</span></p>
<pre class="pre"><code class="calibre9"><span class="thesansmonocd_w5regular_">name = ''</span>
<span class="codeannotated_codeannotation" aria-label="annotation1">❶</span> while not name:
    print('Enter your name:')
    name = input('&gt;')
print('How many guests will you have?')
num_of_guests = int(input('&gt;'))
<span class="codeannotated_codeannotation" aria-label="annotation2">❷</span> if num_of_guests:
    <span class="codeannotated_codeannotation" aria-label="annotation3">❸</span> print('Be sure to have enough room for all your guests.')
print('Done')
</code></pre>
<p class="boxb-last"><span class="sans_futura_std_book_">If the user enters a blank string for</span> <span class="thesansmonocd_w5regular_">name</span><span class="sans_futura_std_book_">, the</span> <span class="thesansmonocd_w5regular_">while</span> <span class="sans_futura_std_book_">statement’s condition will be</span> <span class="thesansmonocd_w5regular_">True</span> <span class="codeannotation" aria-label="annotation1">❶</span><span class="sans_futura_std_book_">, and the program will continue to ask for a name. If the value for</span> <span class="thesansmonocd_w5regular_">num_of_guests</span> <span class="sans_futura_std_book_">is not 0</span> <span class="codeannotation" aria-label="annotation2">❷</span><span class="sans_futura_std_book_">, the condition is considered to be</span> <span class="thesansmonocd_w5regular_">True</span><span class="sans_futura_std_book_">, and the program will print a reminder for the user</span> <span class="codeannotation" aria-label="annotation3">❸</span><span class="sans_futura_std_book_">.</span></p>
<p class="boxb-last"><span class="sans_futura_std_book_">You could have entered</span> <span class="thesansmonocd_w5regular_">not name !=</span> <span class="thesansmonocd_w5regular_">''</span> <span class="sans_futura_std_book_">instead of</span> <span class="thesansmonocd_w5regular_">not name</span><span class="sans_futura_std_book_">, and</span> <span class="thesansmonocd_w5regular_">num_of_guests !=</span> <span class="thesansmonocd_w5regular_">0</span> <span class="sans_futura_std_book_">instead of</span> <span class="thesansmonocd_w5regular_">num_of_guests</span><span class="sans_futura_std_book_">, but using the truthy and falsey values can make your code easier to read.</span></p>
<p class="boxb-last"><span class="sans_futura_std_book_">If you want to know if a value is truthy or falsey, pass it to the</span> <span class="thesansmonocd_w5regular_">bool()</span> <span class="sans_futura_std_book_">function as in this interactive shell example:</span></p>
<pre class="pre"><code class="calibre9"><span class="thesansmonocd_w5regular_">&gt;&gt;&gt;</span> <b class="calibre10">bool(0)</b>
<span role="doc-pagebreak" type="pagebreak" id="calibre_link-1158" aria-label="59"></span>False
&gt;&gt;&gt; <b class="calibre10">bool(42)</b>
True
&gt;&gt;&gt; <b class="calibre10">bool('Hello')</b>
True
&gt;&gt;&gt; <b class="calibre10">bool('')</b>
False
</code></pre>
</aside>
</section>
</section>
<section type="division" aria-labelledby="sec5">
<h3 class="h" id="calibre_link-1466"><span id="calibre_link-65"></span><span class="sans_futura_std_bold_b_">for Loops and the range() Function</span></h3>
<p class="tni">The <span class="thesansmonocd_w5regular_">while</span> loop keeps looping while its condition is <span class="thesansmonocd_w5regular_">True</span> (which is the reason for its name), but what if you want to execute a block of code only a certain number of times? You can do this with a <span class="thesansmonocd_w5regular_">for</span> loop statement and the <span class="thesansmonocd_w5regular_">range()</span> function.</p>
<p class="tx">In code, a <span class="thesansmonocd_w5regular_">for</span> statement looks something like <span class="thesansmonocd_w5regular_">for i in range(5):</span> and includes the following:</p>
<ul class="ul">
<li class="bl">The <span class="thesansmonocd_w5regular_">for</span> keyword</li>
<li class="bl">A variable name</li>
<li class="bl">The <span class="thesansmonocd_w5regular_">in</span> keyword</li>
<li class="bl">A call to the <span class="thesansmonocd_w5regular_">range()</span> function with up to three integers passed to it</li>
<li class="bl">A colon</li>
<li class="bl">Starting on the next line, an indented block of code (called the <span class="thesansmonocd_w5regular_">for</span> clause or <span class="thesansmonocd_w5regular_">for</span> block)</li>
</ul>
<p class="tx">Let’s create a new program called <i class="calibre5">fiveTimes.py</i> to help you see a <span class="thesansmonocd_w5regular_">for</span> loop in action:</p>
<pre class="pre"><code class="calibre9">print('Hello!')
for i in range(5):
    print('On this iteration, i is set to ' + str(i))
print('Goodbye!')
</code></pre>
<p class="tx">The code in the <span class="thesansmonocd_w5regular_">for</span> loop’s clause is run five times. The first time it is run, the variable <span class="thesansmonocd_w5regular_">i</span> is set to <span class="thesansmonocd_w5regular_">0</span>. The <span class="thesansmonocd_w5regular_">print()</span> call in the clause will print <span class="thesansmonocd_w5regular_">On this iteration, i is set to 0</span>. After Python finishes an iteration through all the code inside the <span class="thesansmonocd_w5regular_">for</span> loop’s clause, the execution goes back to the top of the loop, and the <span class="thesansmonocd_w5regular_">for</span> statement increments <span class="thesansmonocd_w5regular_">i</span> by one. This is why <span class="thesansmonocd_w5regular_">range(5)</span> results in five iterations through the clause, with <span class="thesansmonocd_w5regular_">i</span> being set to <span class="thesansmonocd_w5regular_">0</span>, then <span class="thesansmonocd_w5regular_">1</span>, then <span class="thesansmonocd_w5regular_">2</span>, then <span class="thesansmonocd_w5regular_">3</span>, and then <span class="thesansmonocd_w5regular_">4</span>. The variable <span class="thesansmonocd_w5regular_">i</span> will go up to, but will not include, the integer passed to <span class="thesansmonocd_w5regular_">range()</span>. Figure 3-6 shows the flowchart for the <i class="calibre5">fiveTimes.py</i> program.</p>
<span role="doc-pagebreak" type="pagebreak" id="calibre_link-1171" aria-label="60"></span>
<figure class="img"><img class="img3" id="calibre_link-691" src="images/000090.jpg" alt="A flowchart that connects boxes with branching paths labeled “Looping” and “Done looping.”" />
<figcaption><p class="cap"><span class="sans_futura_std_book_oblique_i_">Figure 3-6: The flowchart for the</span> <span class="sans_futura_std_book_">fiveTimes.py</span> <span class="sans_futura_std_book_oblique_i_">program</span> Description</p></figcaption>
</figure>
<p class="tx">Here is the complete output of the program:</p>
<pre class="pre"><code class="calibre9">Hello!
On this iteration, i is set to 0
On this iteration, i is set to 1
On this iteration, i is set to 2
On this iteration, i is set to 3
On this iteration, i is set to 4

Goodbye!
</code></pre>
<p class="tx">You can use <span class="thesansmonocd_w5regular_">break</span> and <span class="thesansmonocd_w5regular_">continue</span> statements inside <span class="thesansmonocd_w5regular_">for</span> loops as well. The <span class="thesansmonocd_w5regular_">continue</span> statement will continue to the next value of the <span class="thesansmonocd_w5regular_">for</span> loop’s counter, as if the program execution had reached the end of the loop and returned to the start. In fact, you can use <span class="thesansmonocd_w5regular_">continue</span> and <span class="thesansmonocd_w5regular_">break</span> statements only inside <span class="thesansmonocd_w5regular_">while</span> and <span class="thesansmonocd_w5regular_">for</span> loops. If you try to use these statements elsewhere, Python will give you an error.</p>
<p class="tx">As another <span class="thesansmonocd_w5regular_">for</span> loop example, consider this story about the mathematician Carl Friedrich Gauss. When Gauss was a boy, a teacher wanted to give the class some busywork. The teacher told them to add up all the numbers from 0 to 100. Young Gauss came up with a clever trick to figure out the answer in a few seconds, but you can write a Python program with a <span class="thesansmonocd_w5regular_">for</span> loop to do this calculation for you:</p>
<pre class="pre"><code class="calibre9">total = 0
for num in range(101):
    total = total + num
print(total)  
</code></pre>
<p class="tx"><span role="doc-pagebreak" type="pagebreak" id="calibre_link-1026" aria-label="61"></span>The result should be 5,050. When the program first starts, the <span class="thesansmonocd_w5regular_">total</span> variable is set to <span class="thesansmonocd_w5regular_">0</span>. The <span class="thesansmonocd_w5regular_">for</span> loop then executes <span class="thesansmonocd_w5regular_">total</span> <span class="thesansmonocd_w5regular_">=</span> <span class="thesansmonocd_w5regular_">total</span> <span class="thesansmonocd_w5regular_">+</span> <span class="thesansmonocd_w5regular_">num</span> 101 times, each time with an incremented <span class="thesansmonocd_w5regular_">num</span> variable. By the time the loop has finished all of its 101 iterations, every integer from <span class="thesansmonocd_w5regular_">0</span> to <span class="thesansmonocd_w5regular_">100</span> will have been added to <span class="thesansmonocd_w5regular_">total</span>. At this point, <span class="thesansmonocd_w5regular_">total</span> is printed to the screen. Even on the slowest computers, this program takes less than a second to complete.</p>
<p class="tx">(Young Gauss figured out a way to solve the problem in seconds. There are 50 pairs of numbers that add up to 101: 1 + 100, 2 + 99, 3 + 98, and so on, until 50 + 51. Since 50 × 101 is 5,050, the sum of all the numbers from 0 to 100 is 5,050. Clever kid!)</p>
<aside class="box" aria-label="box-8">
<p class="bt" id="calibre_link-1467"><span class="sans_futura_std_bold_b_">WHY “UP TO BUT NOT INCLUDING”?</span></p>
<p class="btni"><span class="sans_futura_std_book_">It may seem strange that the</span> <span class="thesansmonocd_w5regular_">range()</span> <span class="sans_futura_std_book_">function in</span> <span class="thesansmonocd_w5regular_">for</span> <span class="sans_futura_std_book_">loops has you specify the number that the loop goes up to, minus one. In programming, ranges are often specified in a “closed, open” format that includes the starting number but excludes the ending number. For example, the range 0, 10 would include the numbers 0 to 9 instead of 0 to 10. There are many advantages of using “closed, open” instead of “closed, closed” that lead to fewer bugs. Calculating the size of the range is just a matter of subtracting the starting number from the ending number. The 0, 10 range (which has the numbers 0 to 9 instead of 0 to 10) has 10 – 0 or 10 numbers. With a “closed, closed” range of 0, 9, you have to calculate the length as 9 – 0 + 1. (And it’s easy to mistakenly do</span> <span class="sans_futura_std_book_oblique_i_">off-by-one</span> <span class="sans_futura_std_book_">errors like 9 – 0 – 1.) The start of the next range 10, 20 is just a matter of using the previous ending number as the new starting number.</span></p>
<p class="boxb-last"><span class="sans_futura_std_book_">For programs that deal with timestamps, the “closed, open” range of 00:00:00, 24:00:00.0 is much easier to work with than the “closed, closed” range of 00:00:00, 23:59:59.999. “Closed, open” ranges may seem odd at first, but they’ll become second nature as you get more experience writing code.</span></p>
</aside>
<section type="division" aria-labelledby="sec6">
<h4 class="h1" id="calibre_link-1468"><span id="calibre_link-66"></span><span class="sans_futura_std_heavy_oblique_bi_">An Equivalent while Loop</span></h4>
<p class="tni">You can actually use a <span class="thesansmonocd_w5regular_">while</span> loop to do the same thing as a <span class="thesansmonocd_w5regular_">for</span> loop; <span class="thesansmonocd_w5regular_">for</span> loops are just more concise. Let’s rewrite <i class="calibre5">fiveTimes.py</i> to use a <span class="thesansmonocd_w5regular_">while</span> loop equivalent of a <span class="thesansmonocd_w5regular_">for</span> loop:</p>
<pre class="pre"><code class="calibre9">print('Hello!')
i = 0
while i &lt; 5:
    print('On this iteration, i is set to ' + str(i))
    i = i + 1
print('Goodbye!')
</code></pre>
<p class="tx">If you run this program, the output should look the same as the <i class="calibre5">fiveTimes.py</i> program, which uses a <span class="thesansmonocd_w5regular_">for</span> loop. Remember that <span class="thesansmonocd_w5regular_">for</span> loops are <span role="doc-pagebreak" type="pagebreak" id="calibre_link-1281" aria-label="62"></span>useful for looping a specific number of times, and <span class="thesansmonocd_w5regular_">while</span> loops are useful for looping as long as a particular condition is true.</p>
</section>
<section type="division" aria-labelledby="sec7">
<h4 class="h1" id="calibre_link-1469"><span id="calibre_link-67"></span><span class="sans_futura_std_heavy_oblique_bi_">Arguments to range()</span></h4>
<p class="tni">Some functions can be called with multiple arguments separated by a comma, and <span class="thesansmonocd_w5regular_">range()</span> is one of them. This lets you change the integer passed to <span class="thesansmonocd_w5regular_">range()</span> to follow any sequence of integers, including starting at a number other than zero:</p>
<pre class="pre"><code class="calibre9">for i in range(12, 16):
    print(i)
</code></pre>
<p class="tx">The first argument will be where the <span class="thesansmonocd_w5regular_">for</span> loop’s variable starts, and the second argument will be up to, but not including, the number to stop at:</p>
<pre class="pre"><code class="calibre9">12
13
14
15
</code></pre>
<p class="tx">The <span class="thesansmonocd_w5regular_">range()</span> function can also be called with three arguments. The first two arguments will be the start and stop values, and the third will be the <i class="calibre5">step argument</i>. The step is the amount by which the variable is increased after each iteration:</p>
<pre class="pre"><code class="calibre9">for i in range(0, 10, 2):
    print(i)
</code></pre>
<p class="tx">So, calling <span class="thesansmonocd_w5regular_">range(0, 10, 2)</span> will count from zero to eight by intervals of two:</p>
<pre class="pre"><code class="calibre9">0
2
4
6
8
</code></pre>
<p class="tx">The <span class="thesansmonocd_w5regular_">range()</span> function is flexible in the sequence of numbers it produces for <span class="thesansmonocd_w5regular_">for</span> loops. <i class="calibre5">For</i> example (I never apologize for my puns), you can even use a negative number for the step argument to make the <span class="thesansmonocd_w5regular_">for</span> loop count down instead of up:</p>
<pre class="pre"><code class="calibre9">for i in range(5, -1, -1):
    print(i)
</code></pre>
<p class="tx">This <span class="thesansmonocd_w5regular_">for</span> loop would have the following output:</p>
<pre class="pre"><code class="calibre9">5
4
3
2
1
0
</code></pre>
<p class="tx"><span role="doc-pagebreak" type="pagebreak" id="calibre_link-760" aria-label="63"></span>Running a <span class="thesansmonocd_w5regular_">for</span> loop to print <span class="thesansmonocd_w5regular_">i</span> with <span class="thesansmonocd_w5regular_">range(5, -1, -1)</span> should print the numbers from five down to zero.</p>
</section>
</section>
<section type="division" aria-labelledby="sec8">
<h3 class="h" id="calibre_link-1470"><span id="calibre_link-68"></span><span class="sans_futura_std_bold_b_">Importing Modules</span></h3>
<p class="tni">All Python programs can call a basic set of functions called <i class="calibre5">built-in functions</i>, including the <span class="thesansmonocd_w5regular_">print()</span>, <span class="thesansmonocd_w5regular_">input()</span>, and <span class="thesansmonocd_w5regular_">len()</span> functions you’ve seen before. Python also comes with a set of modules called the <i class="calibre5">standard library</i>. Each module is a Python program that contains a related group of functions that can be embedded in your programs. For example, the <span class="thesansmonocd_w5regular_">math</span> module has mathematics-related functions, the <span class="thesansmonocd_w5regular_">random</span> module has random number–related functions, and so on.</p>
<p class="tx">Before you can use the functions in a module, you must import the module with an <span class="thesansmonocd_w5regular_">import</span> statement. In code, an <span class="thesansmonocd_w5regular_">import</span> statement consists of the following:</p>
<ul class="ul">
<li class="bl">The <span class="thesansmonocd_w5regular_">import</span> keyword</li>
<li class="bl">The name of the module</li>
<li class="bl">Optionally, more module names, as long as they are separated by commas</li>
</ul>
<p class="tx">Once you import a module, you can use all the cool functions of that module. Let’s give it a try with the <span class="thesansmonocd_w5regular_">random</span> module, which will give us access to the <span class="thesansmonocd_w5regular_">random.randint()</span> function.</p>
<p class="tx">Enter this code into the file editor, and save it as <i class="calibre5">printRandom.py</i>:</p>
<pre class="pre"><code class="calibre9">import random
for i in range(5):
    print(random.randint(1, 10))
</code></pre>
<p class="tx">When you run this program, the output will look something like this:</p>
<pre class="pre"><code class="calibre9">4
1
8
4
1
</code></pre>
<p class="tx">The <span class="thesansmonocd_w5regular_">random.randint()</span> function call evaluates to a random integer value between the two integers that you pass it. Because <span class="thesansmonocd_w5regular_">randint()</span> is in the <span class="thesansmonocd_w5regular_">random</span> module, you must first enter <span class="sans_thesansmonocd_w7bold_b_">random.</span> in front of the function name to tell Python to look for this function inside the <span class="thesansmonocd_w5regular_">random</span> module.</p>
<aside class="box" aria-label="box-9">
<p class="bt" id="calibre_link-1471"><span role="doc-pagebreak" type="pagebreak" id="calibre_link-938" aria-label="64"></span><span class="sans_futura_std_bold_b_">DON’T OVERWRITE MODULE NAMES</span></p>
<p class="btni"><span class="sans_futura_std_book_">When you save your Python scripts, take care not to give them a name that is used by one of Python’s modules, such as</span> <span class="sans_futura_std_book_oblique_i_">random.py</span><span class="sans_futura_std_book_">,</span> <span class="sans_futura_std_book_oblique_i_">sys.py</span><span class="sans_futura_std_book_">,</span> <span class="sans_futura_std_book_oblique_i_">os.py</span><span class="sans_futura_std_book_">, or</span> <span class="sans_futura_std_book_oblique_i_">math.py</span><span class="sans_futura_std_book_">. If you accidentally name one of your programs, say,</span> <span class="sans_futura_std_book_oblique_i_">random.py</span><span class="sans_futura_std_book_">, and use an</span> <span class="thesansmonocd_w5regular_">import random</span> <span class="sans_futura_std_book_">statement in another program, your program will import your</span> <span class="sans_futura_std_book_oblique_i_">random.py</span> <span class="sans_futura_std_book_">file instead of Python’s</span> <span class="thesansmonocd_w5regular_">random</span> <span class="sans_futura_std_book_">module. This can lead to errors such as</span> <span class="thesansmonocd_w5regular_">AttributeError: module 'random' has no attribute 'randint'</span><span class="sans_futura_std_book_">, since your</span> <span class="sans_futura_std_book_oblique_i_">random.py</span> <span class="sans_futura_std_book_">file doesn’t have the functions that the real</span> <span class="thesansmonocd_w5regular_">random</span> <span class="sans_futura_std_book_">module has. Don’t use the names of any built-in Python functions for your file or variable names, either. Some common Python names are</span> <span class="thesansmonocd_w5regular_">all</span><span class="sans_futura_std_book_">,</span> <span class="thesansmonocd_w5regular_">any</span><span class="sans_futura_std_book_">,</span> <span class="thesansmonocd_w5regular_">date</span><span class="sans_futura_std_book_">,</span> <span class="thesansmonocd_w5regular_">email</span><span class="sans_futura_std_book_">,</span> <span class="thesansmonocd_w5regular_">file</span><span class="sans_futura_std_book_">,</span> <span class="thesansmonocd_w5regular_">format</span><span class="sans_futura_std_book_">,</span> <span class="thesansmonocd_w5regular_">hash</span><span class="sans_futura_std_book_">,</span> <span class="thesansmonocd_w5regular_">id</span><span class="sans_futura_std_book_">,</span> <span class="thesansmonocd_w5regular_">input</span><span class="sans_futura_std_book_">,</span> <span class="thesansmonocd_w5regular_">list</span><span class="sans_futura_std_book_">,</span> <span class="thesansmonocd_w5regular_">min</span><span class="sans_futura_std_book_">,</span> <span class="thesansmonocd_w5regular_">max</span><span class="sans_futura_std_book_">,</span> <span class="thesansmonocd_w5regular_">object</span><span class="sans_futura_std_book_">,</span> <span class="thesansmonocd_w5regular_">open</span><span class="sans_futura_std_book_">,</span> <span class="thesansmonocd_w5regular_">random</span><span class="sans_futura_std_book_">,</span> <span class="thesansmonocd_w5regular_">set</span><span class="sans_futura_std_book_">,</span> <span class="thesansmonocd_w5regular_">str</span><span class="sans_futura_std_book_">,</span> <span class="thesansmonocd_w5regular_">sum</span><span class="sans_futura_std_book_">,</span> <span class="thesansmonocd_w5regular_">test</span><span class="sans_futura_std_book_">, and</span> <span class="thesansmonocd_w5regular_">type</span><span class="sans_futura_std_book_">.</span></p>
</aside>
<p class="tx">Here’s an example of an <span class="thesansmonocd_w5regular_">import</span> statement that imports four different modules:</p>
<pre class="pre"><code class="calibre9">import random, sys, os, math</code></pre>
<p class="tx">Now we can use any of the functions in these four modules. You’ll learn more about them later in the book.</p>
<p class="tx">An alternative form of the <span class="thesansmonocd_w5regular_">import</span> statement is composed of the <span class="thesansmonocd_w5regular_">from</span> keyword, followed by the module name, the <span class="thesansmonocd_w5regular_">import</span> keyword, and a star (<span class="thesansmonocd_w5regular_">*</span>); for example, <span class="thesansmonocd_w5regular_">from random import *</span>. With this form of <span class="thesansmonocd_w5regular_">import</span> statement, calls to functions in <span class="thesansmonocd_w5regular_">random</span> won’t need the <span class="thesansmonocd_w5regular_">random.</span> prefix. However, using the full name makes for more readable code, so it is better to use the <span class="thesansmonocd_w5regular_">import random</span> form of the statement.</p>
</section>
<section type="division" aria-labelledby="sec9">
<h3 class="h" id="calibre_link-1472"><span id="calibre_link-69"></span><span class="sans_futura_std_bold_b_">Ending a Program Early with sys.exit()</span></h3>
<p class="tni">The last flow control concept to cover is how to <i class="calibre5">terminate</i>, or exit, the program. Programs always terminate if the program execution reaches the bottom of the instructions. However, you can cause the program to terminate before the last instruction by calling the <span class="thesansmonocd_w5regular_">sys.exit()</span> function. Since this function is in the <span class="thesansmonocd_w5regular_">sys</span> module, you have to import <span class="thesansmonocd_w5regular_">sys</span> before your program can use it.</p>
<p class="tx">Open a file editor window and enter the following code, saving it as <i class="calibre5">exitExample.py</i>:</p>
<pre class="pre"><code class="calibre9">import sys

while True:
    print('Type exit to exit.')
    response = input('&gt;')
    if response == 'exit':
<span role="doc-pagebreak" type="pagebreak" id="calibre_link-1182" aria-label="65"></span>        sys.exit()
    print('You typed ' + response + '.')
</code></pre>
<p class="tx">Run this program in your code editor. This program has an infinite loop with no <span class="thesansmonocd_w5regular_">break</span> statement inside. The only way this program will end is if the execution reaches the <span class="thesansmonocd_w5regular_">sys.exit()</span> call. When <span class="thesansmonocd_w5regular_">response</span> is equal to <span class="thesansmonocd_w5regular_">'exit'</span>, the line containing the <span class="thesansmonocd_w5regular_">sys.exit()</span> call is executed. Since the <span class="thesansmonocd_w5regular_">response</span> variable is set by the <span class="thesansmonocd_w5regular_">input()</span> function, the user must enter <span class="thesansmonocd_w5regular_">exit</span> in order to stop the program.</p>
</section>
<section type="division" aria-labelledby="sec10">
<h3 class="h" id="calibre_link-1473"><span id="calibre_link-70"></span><span class="sans_futura_std_bold_b_">A Short Program: Guess the Number</span></h3>
<p class="tni">The examples I’ve shown you so far are useful for introducing basic concepts, but now you’ll see how everything you’ve learned comes together in a more complete program. In this section, I’ll show you a simple guess the number game. When you run this program, the output will look something like this:</p>
<pre class="pre"><code class="calibre9">I am thinking of a number between 1 and 20.
Take a guess.
&gt;<b class="calibre10">10</b>
Your guess is too low.
Take a guess.
&gt;<b class="calibre10">15</b>
Your guess is too low.
Take a guess.
&gt;<b class="calibre10">17</b>
Your guess is too high.
Take a guess.
&gt;<b class="calibre10">16</b>
Good job! You got it in 4 guesses!
</code></pre>
<p class="tx">Enter the following source code into the file editor, and save the file as <i class="calibre5">guessTheNumber.py</i>:</p>
<pre class="pre"><code class="calibre9"># This is a guess the number game.
import random
secret_number = random.randint(1, 20)
print('I am thinking of a number between 1 and 20.')

# Ask the player to guess 6 times.
for guesses_taken in range(1, 7):
    print('Take a guess.')
    guess = int(input('&gt;'))

    if guess &lt; secret_number:
        print('Your guess is too low.')
    elif guess &gt; secret_number:
        print('Your guess is too high.')
    else:
        break  # This condition is the correct guess!

<span role="doc-pagebreak" type="pagebreak" id="calibre_link-1279" aria-label="66"></span>if guess == secret_number:
    print('Good job! You got it in ' + str(guesses_taken) + ' guesses!')
else:
    print('Nope. The number was ' + str(secret_number))
</code></pre>
<p class="tx">Let’s look at this code line by line, starting at the top:</p>
<pre class="pre"><code class="calibre9"># This is a guess the number game.
import random
secret_number = random.randint(1, 20)
</code></pre>
<p class="tx">First, a comment at the top of the code explains what the program does. Then, the program imports the <span class="thesansmonocd_w5regular_">random</span> module so that it can use the <span class="thesansmonocd_w5regular_">random.randint()</span> function to generate a number for the user to guess. The return value, a random integer between 1 and 20, is stored in the variable <span class="thesansmonocd_w5regular_">secret_number</span>:</p>
<pre class="pre"><code class="calibre9">print('I am thinking of a number between 1 and 20.')

# Ask the player to guess 6 times.
for guesses_taken in range(1, 7):
    print('Take a guess.')
    guess = int(input('&gt;'))
</code></pre>
<p class="tx">The program tells the player that it has come up with a secret number and will give the player six chances to guess it. The code lets the player enter a guess and checks that guess in a <span class="thesansmonocd_w5regular_">for</span> loop that will loop at most six times. The first thing that happens in the loop is that the player types in a guess. Because <span class="thesansmonocd_w5regular_">input()</span> returns a string, its return value is passed straight into <span class="thesansmonocd_w5regular_">int()</span>, which translates the string into an integer value. This gets stored in a variable named <span class="thesansmonocd_w5regular_">guess</span>:</p>
<pre class="pre"><code class="calibre9">    if guess &lt; secret_number:
        print('Your guess is too low.')
    elif guess &gt; secret_number:
        print('Your guess is too high.')
</code></pre>
<p class="tx">These few lines of code check whether the guess is less than or greater than the secret number. In either case, a hint is printed to the screen:</p>
<pre class="pre"><code class="calibre9">    else:
        break  # This condition is the correct guess!
</code></pre>
<p class="tx">If the guess is neither higher nor lower than the secret number, then it must be equal to the secret number—in which case, you want the program execution to break out of the <span class="thesansmonocd_w5regular_">for</span> loop:</p>
<pre class="pre"><code class="calibre9">if guess == secret_number:
    print('Good job! You got it in ' + str(guesses_taken) + ' guesses!')
else:
    print('Nope. The number was ' + str(secret_number))
</code></pre>
<p class="tx"><span role="doc-pagebreak" type="pagebreak" id="calibre_link-1289" aria-label="67"></span>After the <span class="thesansmonocd_w5regular_">for</span> loop, the previous <span class="thesansmonocd_w5regular_">if-else</span> statement checks whether the player has correctly guessed the number and then prints an appropriate message to the screen. In both cases, the program displays a variable that contains an integer value (<span class="thesansmonocd_w5regular_">guesses_taken</span> and <span class="thesansmonocd_w5regular_">secret_number</span>). Since it must concatenate these integer values to strings, it passes these variables to the <span class="thesansmonocd_w5regular_">str()</span> function, which returns the string value form of these integers. Now these strings can be concatenated with the <span class="thesansmonocd_w5regular_">+</span> operators before finally being passed to the <span class="thesansmonocd_w5regular_">print()</span> function call.</p>
</section>
<section type="division" aria-labelledby="sec11">
<h3 class="h" id="calibre_link-1474"><span id="calibre_link-71"></span><span class="sans_futura_std_bold_b_">A Short Program: Rock, Paper, Scissors</span></h3>
<p class="tni">Let’s use the programming concepts we’ve learned so far to create a simple rock, paper, scissors game. The output will look like this:</p>
<pre class="pre"><code class="calibre9">ROCK, PAPER, SCISSORS
0 Wins, 0 Losses, 0 Ties
Enter your move: (r)ock (p)aper (s)cissors or (q)uit
&gt;<b class="calibre10">p</b>
PAPER versus...
PAPER
It is a tie!
0 Wins, 0 Losses, 1 Ties
Enter your move: (r)ock (p)aper (s)cissors or (q)uit
&gt;<b class="calibre10">s</b>
SCISSORS versus...
PAPER
You win!
1 Wins, 0 Losses, 1 Ties
Enter your move: (r)ock (p)aper (s)cissors or (q)uit
&gt;<b class="calibre10">q</b>
</code></pre>
<p class="tx">Enter the following source code into the file editor, and save the file as <i class="calibre5">rpsGame.py</i>:</p>
<pre class="pre"><code class="calibre9">import random, sys

print('ROCK, PAPER, SCISSORS')

# These variables keep track of the number of wins, losses, and ties.
wins = 0
losses = 0
ties = 0

while True:  # The main game loop
    print('%s Wins, %s Losses, %s Ties' % (wins, losses, ties))
    while True:  # The player input loop
        print('Enter your move: (r)ock (p)aper (s)cissors or (q)uit')
        player_move = input('&gt;')
        if player_move == 'q':
            sys.exit()  # Quit the program.
<span role="doc-pagebreak" type="pagebreak" id="calibre_link-1475" aria-label="68"></span>        if player_move == 'r' or player_move == 'p' or player_move == 's':
            break  # Break out of the player input loop.
        print('Type one of r, p, s, or q.')

    # Display what the player chose:
    if player_move == 'r':
        print('ROCK versus...')
    elif player_move == 'p':
        print('PAPER versus...')
    elif player_move == 's':
        print('SCISSORS versus...')

    # Display what the computer chose:
    move_number = random.randint(1, 3)
    if move_number == 1:
        computer_move = 'r'
        print('ROCK')
    elif move_number == 2:
        computer_move = 'p'
        print('PAPER')
    elif move_number == 3:
        computer_move = 's'
        print('SCISSORS')

    # Display and record the win/loss/tie:
    if player_move == computer_move:
        print('It is a tie!')
        ties = ties + 1
    elif player_move == 'r' and computer_move == 's':
        print('You win!')
        wins = wins + 1
    elif player_move == 'p' and computer_move == 'r':
        print('You win!')
        wins = wins + 1
    elif player_move == 's' and computer_move == 'p':
        print('You win!')
        wins = wins + 1
    elif player_move == 'r' and computer_move == 'p':
        print('You lose!')
        losses = losses + 1
    elif player_move == 'p' and computer_move == 's':
        print('You lose!')
        losses = losses + 1
    elif player_move == 's' and computer_move == 'r':
        print('You lose!')
        losses = losses + 1
</code></pre>
<p class="tx">Let’s look at this code line by line, starting at the top:</p>
<pre class="pre"><code class="calibre9">import random, sys

print('ROCK, PAPER, SCISSORS')

# These variables keep track of the number of wins, losses, and ties.
wins = 0
<span role="doc-pagebreak" type="pagebreak" id="calibre_link-1476" aria-label="69"></span>losses = 0
ties = 0
</code></pre>
<p class="tx">First, we import the <span class="thesansmonocd_w5regular_">random</span> and <span class="thesansmonocd_w5regular_">sys</span> modules so that our program can call the <span class="thesansmonocd_w5regular_">random.randint()</span> and <span class="thesansmonocd_w5regular_">sys.exit()</span> functions. We also set up three variables to keep track of how many wins, losses, and ties the player has had:</p>
<pre class="pre"><code class="calibre9">while True:  # The main game loop
    print('%s Wins, %s Losses, %s Ties' % (wins, losses, ties))
    while True:  # The player input loop
        print('Enter your move: (r)ock (p)aper (s)cissors or (q)uit')
        player_move = input('&gt;')
        if player_move == 'q':
            sys.exit()  # Quit the program.
        if player_move == 'r' or player_move == 'p' or player_move == 's':
            break  # Break out of the player input loop.
        print('Type one of r, p, s, or q.')
</code></pre>
<p class="tx">This program uses a <span class="thesansmonocd_w5regular_">while</span> loop inside another <span class="thesansmonocd_w5regular_">while</span> loop. The first loop is the main game loop, and a single game of rock, paper, scissors is played on each iteration through this loop. The second loop asks for input from the player, and keeps looping until the player has entered an <span class="thesansmonocd_w5regular_">r</span>, <span class="thesansmonocd_w5regular_">p</span>, <span class="thesansmonocd_w5regular_">s</span>, or <span class="thesansmonocd_w5regular_">q</span> for their move. The <span class="thesansmonocd_w5regular_">r</span>, <span class="thesansmonocd_w5regular_">p</span>, and <span class="thesansmonocd_w5regular_">s</span> correspond to rock, paper, and scissors, respectively, while the <span class="thesansmonocd_w5regular_">q</span> means the player intends to quit. In that case, <span class="thesansmonocd_w5regular_">sys.exit()</span> is called and the program exits. If the player has entered <span class="thesansmonocd_w5regular_">r</span>, <span class="thesansmonocd_w5regular_">p</span>, or <span class="thesansmonocd_w5regular_">s</span>, the execution breaks out of the loop. Otherwise, the program reminds the player to enter <span class="thesansmonocd_w5regular_">r</span>, <span class="thesansmonocd_w5regular_">p</span>, <span class="thesansmonocd_w5regular_">s</span>, or <span class="thesansmonocd_w5regular_">q</span> and goes back to the start of the loop:</p>
<pre class="pre"><code class="calibre9">    # Display what the player chose:
    if player_move == 'r':
        print('ROCK versus...')
    elif player_move == 'p':
        print('PAPER versus...')
    elif player_move == 's':
        print('SCISSORS versus...')
</code></pre>
<p class="tx">The player’s move is displayed on the screen:</p>
<pre class="pre"><code class="calibre9">    # Display what the computer chose:
    move_number = random.randint(1, 3)
    if move_number == 1:
        computer_move = 'r'
        print('ROCK')
    elif move_number == 2:
        computer_move = 'p'
        print('PAPER')
    elif move_number == 3:
        computer_move = 's'
        print('SCISSORS')
</code></pre>
<p class="tx">Next, the program randomly selects the computer’s move. Because <span class="thesansmonocd_w5regular_">random.randint()</span> will always return a random number, the code stores the <span role="doc-pagebreak" type="pagebreak" id="calibre_link-961" aria-label="70"></span><span class="thesansmonocd_w5regular_">1</span>, <span class="thesansmonocd_w5regular_">2</span>, or <span class="thesansmonocd_w5regular_">3</span> integer value it returns in a variable named <span class="thesansmonocd_w5regular_">move_number</span>. The program then stores an <span class="thesansmonocd_w5regular_">'r'</span>, <span class="thesansmonocd_w5regular_">'p'</span>, or <span class="thesansmonocd_w5regular_">'s'</span> string in <span class="thesansmonocd_w5regular_">computer_move</span> based on the integer in <span class="thesansmonocd_w5regular_">move_number</span>, as well as displays the computer’s move:</p>
<pre class="pre"><code class="calibre9">    # Display and record the win/loss/tie:
    if player_move == computer_move:
        print('It is a tie!')
        ties = ties + 1
    elif player_move == 'r' and computer_move == 's':
        print('You win!')
        wins = wins + 1
    elif player_move == 'p' and computer_move == 'r':
        print('You win!')
        wins = wins + 1
    elif player_move == 's' and computer_move == 'p':
        print('You win!')
        wins = wins + 1
    elif player_move == 'r' and computer_move == 'p':
        print('You lose!')
        losses = losses + 1
    elif player_move == 'p' and computer_move == 's':
        print('You lose!')
        losses = losses + 1
    elif player_move == 's' and computer_move == 'r':
        print('You lose!')
        losses = losses + 1
</code></pre>
<p class="tx">Finally, the program compares the strings in <span class="thesansmonocd_w5regular_">player_move</span> and <span class="thesansmonocd_w5regular_">computer_move</span>, and displays the results on the screen. It also increments the <span class="thesansmonocd_w5regular_">wins</span>, <span class="thesansmonocd_w5regular_">losses</span>, or <span class="thesansmonocd_w5regular_">ties</span> variable appropriately. Once the execution reaches the end, it jumps back to the start of the main program loop to begin another game.</p>
<p class="tx">If you liked these guess the number and rock, paper, scissors games, you can find the source code to other simple Python programs in <i class="calibre5">The Big Book of Small Python Projects</i> (No Starch Press, 2021).</p>
</section>
<section type="conclusion" role="doc-conclusion" aria-labelledby="sec12">
<h3 class="h" id="calibre_link-1477"><span id="calibre_link-72"></span><span class="sans_futura_std_bold_b_">Summary</span></h3>
<p class="tni">Loops let your programs execute code over and over again while a certain condition evaluates to <span class="thesansmonocd_w5regular_">True</span>. The <span class="thesansmonocd_w5regular_">break</span> and <span class="thesansmonocd_w5regular_">continue</span> statements are useful if you need to exit a loop or jump back to the loop’s start.</p>
<p class="tx">These flow control statements will let you write more intelligent programs. You can also use another type of flow control by writing your own functions, which is the topic of the next chapter.</p>
</section>
<section type="division" aria-labelledby="sec13">
<h3 class="h" id="calibre_link-1478"><span id="calibre_link-73"></span><span class="sans_futura_std_bold_b_">Practice Questions</span></h3>
<p class="listnumber">  1.  What keys can you press if your Python program is stuck in an infinite loop?</p>
<p class="listnumber">  2.  What is the difference between <span class="thesansmonocd_w5regular_">break</span> and <span class="thesansmonocd_w5regular_">continue</span>?</p>
<p class="listnumber"><span role="doc-pagebreak" type="pagebreak" id="calibre_link-1479" aria-label="71"></span>  3.  What is the difference between <span class="thesansmonocd_w5regular_">range(10)</span>, <span class="thesansmonocd_w5regular_">range(0, 10)</span>, and <span class="thesansmonocd_w5regular_">range(0, 10, 1)</span> in a <span class="thesansmonocd_w5regular_">for</span> loop?</p>
<p class="listnumber">  4.  Write a short program that prints the numbers <span class="thesansmonocd_w5regular_">1</span> to <span class="thesansmonocd_w5regular_">10</span> using a <span class="thesansmonocd_w5regular_">for</span> loop. Then, write an equivalent program that prints the numbers <span class="thesansmonocd_w5regular_">1</span> to <span class="thesansmonocd_w5regular_">10</span> using a <span class="thesansmonocd_w5regular_">while</span> loop.</p>
<p class="listnumber">  5.  If you had a function named <span class="thesansmonocd_w5regular_">bacon()</span> inside a module named <span class="thesansmonocd_w5regular_">spam</span>, how would you call it after importing <span class="thesansmonocd_w5regular_">spam</span>?</p>
</section>
</section>
</div>


</div>



</body></html>